# åºåˆ— DP

å‚è€ƒ 1ï¼š[leetcode 300 é¢˜è§£ï¼ˆLISï¼‰](https://leetcode-cn.com/problems/longest-increasing-subsequence/solution/dong-tai-gui-hua-er-fen-cha-zhao-tan-xin-suan-fa-p/)

å‚è€ƒ 2ï¼š[leetcode 1143 é¢˜è§£ï¼ˆLCSï¼‰](https://leetcode-cn.com/problems/longest-common-subsequence/solution/fu-xue-ming-zhu-er-wei-dong-tai-gui-hua-r5ez6/)

å‚è€ƒ 3ï¼š[leetcode 53 é¢˜è§£ï¼ˆæœ€å¤§å­æ•°ç»„å’Œï¼‰](https://leetcode-cn.com/problems/maximum-subarray/solution/dong-tai-gui-hua-fen-zhi-fa-python-dai-ma-java-dai/)

## æ— åæ•ˆæ€§

**ã€Œæ— åæ•ˆæ€§ã€æ˜¯ã€ŒåŠ¨æ€è§„åˆ’ã€ä¸­éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œç†è§£è¿™ä¸ªæ¦‚å¿µæ— æ¯”é‡è¦**ã€‚å¾ˆé—æ†¾ï¼Œã€Šç®—æ³•å¯¼è®ºã€‹ä¸Šæ²¡æœ‰è®²åˆ°ã€Œæ— åæ•ˆæ€§ã€ã€‚æˆ‘æ‰¾äº†ä¸€æœ¬åœ¨ã€Œè±†ç“£ã€ç›®å‰è±†ç“£ä¸Šè¯„åˆ†ä¸º 9.2 çš„ä¹¦ ã€Šç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—ã€‹ï¼Œè¿™æœ¬ä¹¦å’Œã€Šç®—æ³•å¯¼è®ºã€‹ã€Šç®—æ³• 4ã€‹å’Œ liuyubobobo è€å¸ˆçš„ç®—æ³•è¯¾ç¨‹ä¸€æ ·ï¼Œåœ¨æˆ‘å­¦ä¹ ç®—æ³•ä¸æ•°æ®ç»“æ„çš„é“è·¯ä¸Šï¼Œéƒ½å‘æŒ¥äº†å·¨å¤§çš„ä½œç”¨ã€‚

æç…œä¸œè‘—ã€Šç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—ã€‹ï¼Œæ‘˜å½•å¦‚ä¸‹ï¼šï¼š

**ä¸ºäº†ä¿è¯è®¡ç®—å­é—®é¢˜èƒ½å¤ŸæŒ‰ç…§é¡ºåºã€ä¸é‡å¤åœ°è¿›è¡Œï¼ŒåŠ¨æ€è§„åˆ’è¦æ±‚å·²ç»æ±‚è§£çš„å­é—®é¢˜ä¸å—åç»­é˜¶æ®µçš„å½±å“**ã€‚è¿™ä¸ªæ¡ä»¶ä¹Ÿè¢«å«åšã€Œæ— åæ•ˆæ€§ã€ã€‚æ¢è¨€ä¹‹ï¼ŒåŠ¨æ€è§„åˆ’å¯¹çŠ¶æ€ç©ºé—´çš„éå†æ„æˆä¸€å¼ æœ‰å‘æ— ç¯å›¾ï¼Œéå†å°±æ˜¯è¯¥æœ‰å‘æ— ç¯å›¾çš„ä¸€ä¸ªæ‹“æ‰‘åºã€‚æœ‰å‘æ— ç¯å›¾ä¸­çš„èŠ‚ç‚¹å¯¹åº”é—®é¢˜ä¸­çš„ã€ŒçŠ¶æ€ã€ï¼Œå›¾ä¸­çš„è¾¹åˆ™å¯¹åº”çŠ¶æ€ä¹‹é—´çš„ã€Œè½¬ç§»ã€ï¼Œè½¬ç§»çš„é€‰å–å°±æ˜¯åŠ¨æ€è§„åˆ’ä¸­çš„ã€Œå†³ç­–ã€ã€‚

è§£é‡Šï¼š

- ã€Œæœ‰å‘æ— ç¯å›¾ã€ã€Œæ‹“æ‰‘åºã€è¡¨ç¤ºäº†æ¯ä¸€ä¸ªå­é—®é¢˜åªæ±‚è§£ä¸€æ¬¡ï¼Œä»¥åæ±‚è§£é—®é¢˜çš„è¿‡ç¨‹ä¸ä¼šä¿®æ”¹ä»¥å‰æ±‚è§£çš„å­é—®é¢˜çš„ç»“æœï¼›
- æ¢å¥è¯è¯´ï¼šå¦‚æœä¹‹å‰çš„é˜¶æ®µæ±‚è§£çš„å­é—®é¢˜çš„ç»“æœåŒ…å«äº†ä¸€äº›ä¸ç¡®å®šçš„ä¿¡æ¯ï¼Œå¯¼è‡´äº†åé¢çš„é˜¶æ®µæ±‚è§£çš„å­é—®é¢˜æ— æ³•å¾—åˆ°ï¼Œæˆ–è€…å¾ˆéš¾å¾—åˆ°ï¼Œè¿™å«ã€Œæœ‰åæ•ˆæ€§ã€ï¼Œæˆ‘ä»¬åœ¨å½“å‰è¿™ä¸ªé—®é¢˜ç¬¬ 1 æ¬¡æ‹†åˆ†çš„å­é—®é¢˜å°±æ˜¯ã€Œæœ‰åæ•ˆæ€§ã€çš„ï¼ˆå¤§å®¶å¯ä»¥å†ç¿»åˆ°ä¸Šé¢å†çœ‹çœ‹ï¼‰ï¼›
- è§£å†³ã€Œæœ‰åæ•ˆæ€§ã€çš„åŠæ³•æ˜¯å›ºå®šä½éœ€è¦åˆ†ç±»è®¨è®ºçš„åœ°æ–¹ï¼Œè®°å½•ä¸‹æ›´å¤šçš„ç»“æœã€‚åœ¨ä»£ç å±‚é¢ä¸Šè¡¨ç°ä¸ºï¼š
  - çŠ¶æ€æ•°ç»„å¢åŠ ç»´åº¦ï¼Œä¾‹å¦‚ï¼šã€ŒåŠ›æ‰£ã€çš„è‚¡ç¥¨ç³»åˆ—é—®é¢˜ï¼›
  - æŠŠçŠ¶æ€å®šä¹‰å¾—æ›´ç»†è‡´ã€å‡†ç¡®ï¼Œä¾‹å¦‚ï¼šå‰å¤©æ¨é€çš„ç¬¬ 124 é¢˜ï¼šçŠ¶æ€å®šä¹‰åªè§£å†³è·¯å¾„æ¥è‡ªå·¦å³å­æ ‘çš„å…¶ä¸­ä¸€ä¸ªå­æ ‘ã€‚

## æ€è€ƒé¡ºåº

**1. å®šä¹‰çŠ¶æ€**

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

**3. åˆå§‹åŒ–**

**4. è¾“å‡º**

**ç©ºé—´ä¼˜åŒ–**

**å¤æ‚åº¦åˆ†æ**

## ä¸€ã€æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰

æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLongest Increasing Subsequenceï¼Œç®€å†™ LISï¼‰æ˜¯éå¸¸ç»å…¸çš„ä¸€ä¸ªç®—æ³•é—®é¢˜ï¼Œæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ˜¯åŠ¨æ€è§„åˆ’è§£æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ O(N^2)ï¼Œæˆ‘ä»¬å€Ÿè¿™ä¸ªé—®é¢˜æ¥ç”±æµ…å…¥æ·±è®²è§£å¦‚ä½•æ‰¾çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¦‚ä½•å†™å‡ºåŠ¨æ€è§„åˆ’è§£æ³•ã€‚æ¯”è¾ƒéš¾æƒ³åˆ°çš„æ˜¯åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(NlogN)

é¢˜ç›®ï¼š[300. æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

```
è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚

è¾“å…¥ï¼šnums = [0,1,0,3,2,3]
è¾“å‡ºï¼š4

è¾“å…¥ï¼šnums = [7,7,7,7,7,7,7]
è¾“å‡ºï¼š1
```

> ã€Œå­åºåˆ—ã€æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ã€Œå­ä¸²ã€ä¸€å®šæ˜¯è¿ç»­çš„ã€‚
>
> ä¾‹å¦‚ï¼Œ`[3,6,2,7]` æ˜¯æ•°ç»„ `[0,3,1,6,2,2,7]` çš„å­åºåˆ—

### 1ã€æš´åŠ›è§£æ³•

ä½¿ç”¨ã€Œå›æº¯æœç´¢ç®—æ³•ã€æˆ–è€…ã€Œä½è¿ç®—ã€çš„æŠ€å·§ï¼Œå¯ä»¥å¾—åˆ°è¾“å…¥æ•°ç»„çš„æ‰€æœ‰å­åºåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(2^N)ã€‚å†å¯¹è¿™äº›å­ä¸²å†ä¾æ¬¡åˆ¤å®šæ˜¯å¦ä¸ºã€Œä¸¥æ ¼ä¸Šå‡ã€ï¼Œæ—¶é—´å¤æ‚åº¦ ä¸ºO(N)ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(N 2^N)

å¦‚æœé¢˜ç›®é—®æ‰€æœ‰è§£ï¼Œåº”è¯¥ä½¿ç”¨å›æº¯ç®—æ³•ï¼ˆæš´åŠ›æœç´¢ï¼‰æœç´¢æ‰€æœ‰å…·ä½“è§£ã€‚è‹¥é—®æœ€ä¼˜è§£çš„é•¿åº¦ï¼Œç”¨åŠ¨æ€è§„åˆ’

### 2ã€åŠ¨æ€è§„åˆ’

åŸºäºã€ŒåŠ¨æ€è§„åˆ’ã€çš„çŠ¶æ€è®¾è®¡éœ€è¦æ»¡è¶³ã€Œæ— åæ•ˆæ€§ã€çš„è®¾è®¡æ€æƒ³ï¼Œå¯ä»¥å°†çŠ¶æ€å®šä¹‰ä¸ºã€Œä»¥ `nums[i]` ç»“å°¾ çš„ã€Œä¸Šå‡å­åºåˆ—ã€çš„é•¿åº¦ã€ã€‚

> ã€Œæ— åæ•ˆæ€§ã€çš„è®¾è®¡æ€æƒ³ï¼šè®©ä¸ç¡®å®šçš„å› ç´ ç¡®å®šä¸‹æ¥ï¼Œä»¥ä¿è¯æ±‚è§£çš„è¿‡ç¨‹å½¢æˆä¸€ä¸ªé€»è¾‘ä¸Šçš„æœ‰å‘æ— ç¯å›¾ã€‚è¿™é¢˜ä¸ç¡®å®šçš„å› ç´ æ˜¯æŸä¸ªå…ƒç´ æ˜¯å¦è¢«é€‰ä¸­ï¼Œè€Œæˆ‘ä»¬è®¾è®¡çŠ¶æ€çš„æ—¶å€™ï¼Œè®© nums[i] å¿…éœ€è¢«é€‰ä¸­ï¼Œè¿™ä¸€ç‚¹æ˜¯ã€Œè®©ä¸ç¡®å®šçš„å› ç´ ç¡®å®šä¸‹æ¥ã€ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¿™æ ·è®¾è®¡çŠ¶æ€çš„åŸå› ã€‚

**1. å®šä¹‰çŠ¶æ€**ï¼š

`dp[i]` è¡¨ç¤ºï¼š**ä»¥ `nums[i]` ç»“å°¾** çš„ã€Œä¸Šå‡å­åºåˆ—ã€çš„é•¿åº¦ã€‚æ³¨æ„ï¼šè¿™ä¸ªå®šä¹‰ä¸­ **`nums[i]` å¿…é¡»è¢«é€‰å–ï¼Œä¸”å¿…é¡»æ˜¯è¿™ä¸ªå­åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ **ï¼›

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼š

å¦‚æœä¸€ä¸ªè¾ƒå¤§çš„æ•°æ¥åœ¨è¾ƒå°çš„æ•°åé¢ï¼Œå°±ä¼šå½¢æˆä¸€ä¸ªæ›´é•¿çš„å­åºåˆ—ã€‚åªè¦ nums[i] ä¸¥æ ¼å¤§äºåœ¨å®ƒä½ç½®ä¹‹å‰çš„æŸä¸ªæ•°ï¼Œé‚£ä¹ˆ nums[i] å°±å¯ä»¥æ¥åœ¨è¿™ä¸ªæ•°åé¢å½¢æˆä¸€ä¸ªæ›´é•¿çš„ä¸Šå‡å­åºåˆ—ã€‚

$$
dp[i] = max(dp[i],\ dp[j]+1) \qquad j\in[0,i), \ nums[j] <nums[i]
$$
**3. åˆå§‹åŒ–**ï¼š

`dp[i] = 1`ï¼Œ11 ä¸ªå­—ç¬¦æ˜¾ç„¶æ˜¯é•¿åº¦ä¸º 11 çš„ä¸Šå‡å­åºåˆ—ã€‚

**4. è¾“å‡º**ï¼š

ä¸èƒ½è¿”å›æœ€åä¸€ä¸ªçŠ¶æ€å€¼ï¼Œæœ€åä¸€ä¸ªçŠ¶æ€å€¼åªè¡¨ç¤ºä»¥ `nums[len - 1]` ç»“å°¾çš„ã€Œä¸Šå‡å­åºåˆ—ã€çš„é•¿åº¦ï¼ŒçŠ¶æ€æ•°ç»„ `dp` çš„æœ€å¤§å€¼æ‰æ˜¯é¢˜ç›®è¦æ±‚çš„ç»“æœã€‚
$$
max(dp[i]) \qquad i\in[0,n-1]
$$
**5. ç©ºé—´ä¼˜åŒ–**ï¼š

éå†åˆ°ä¸€ä¸ªæ–°æ•°çš„æ—¶å€™ï¼Œä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€å€¼éƒ½å¾—ä¿ç•™ï¼Œå› æ­¤æ— æ³•ä¼˜åŒ–ç©ºé—´ã€‚

**å¤æ‚åº¦åˆ†æ**ï¼š

æ—¶é—´å¤æ‚åº¦ï¼š`O(N^2)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(N)`

```c++
class Solution {
public:
    int lengthOfLIS(vector<int>& nums) {
        int n = nums.size();

        vector<int> dp(n, 1);
        for (int i = 1; i < n; i++) {
            for (int j = 0; j < i; j++) {
                if (nums[i] > nums[j]) {
                    dp[i] = max(dp[i], dp[j] + 1);
                }
            }
        }
        return *max_element(dp.begin(), dp.end());
    }
};
```

### 3ã€äºŒåˆ†æŸ¥æ‰¾ + è´ªå¿ƒç®—æ³•

**çŠ¶æ€è®¾è®¡æ€æƒ³**ï¼š

ä¾ç„¶ç€çœ¼äºæŸä¸ªä¸Šå‡å­åºåˆ—çš„ã€Œç»“å°¾çš„å…ƒç´ ã€ï¼Œ**å¦‚æœå·²ç»å¾—åˆ°çš„ä¸Šå‡å­åºåˆ—çš„ã€Œç»“å°¾çš„æ•°è¶Šå°ã€ï¼Œé‚£ä¹ˆéå†çš„æ—¶å€™åé¢æ¥ä¸Šä¸€ä¸ªæ•°ï¼Œä¼šæœ‰æ›´å¤§çš„å¯èƒ½æ„æˆä¸€ä¸ªé•¿åº¦æ›´é•¿çš„ä¸Šå‡å­åºåˆ—**ã€‚æ—¢ç„¶ç»“å°¾è¶Šå°è¶Šå¥½ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½• åœ¨é•¿åº¦å›ºå®šçš„æƒ…å†µä¸‹ï¼Œç»“å°¾æœ€å°çš„é‚£ä¸ªå…ƒç´ çš„æ•°å€¼ï¼Œè¿™æ ·å®šä¹‰ä»¥åå®¹æ˜“å¾—åˆ°ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€

ä¸ºäº†ä¸ã€Œæ–¹æ³•äºŒã€çš„çŠ¶æ€å®šä¹‰åŒºåˆ†ï¼Œå°†çŠ¶æ€æ•°ç»„å‘½åä¸º tail

**1 .å®šä¹‰æ–°çŠ¶æ€**ï¼š

`tail[i]` è¡¨ç¤ºï¼šé•¿åº¦ä¸º `i + 1` çš„ **æ‰€æœ‰** ä¸Šå‡å­åºåˆ—çš„ç»“å°¾çš„æœ€å°å€¼

è¯´æ˜ï¼š

- æ•°ç»„ tail ä¸æ˜¯é—®é¢˜ä¸­çš„ã€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€ï¼ˆä¸‹æ–‡è¿˜ä¼šå¼ºè°ƒï¼‰ï¼Œä¸èƒ½å‘½åä¸º LISã€‚æ•°ç»„ tail åªæ˜¯ç”¨äºæ±‚è§£ LIS é—®é¢˜çš„çŠ¶æ€æ•°ç»„ï¼›
- tail[0] è¡¨ç¤ºé•¿åº¦ä¸º 1 çš„æ‰€æœ‰ä¸Šå‡å­åºåˆ—ä¸­ï¼Œç»“å°¾æœ€å°çš„å…ƒç´ çš„æ•°å€¼ã€‚ä»¥é¢˜ç›®ä¸­çš„ç¤ºä¾‹ä¸ºä¾‹ [10, 9, 2, 5, 3, 7, 101, 18] ä¸­ï¼Œå®¹æ˜“å‘ç°é•¿åº¦ä¸º 2 çš„æ‰€æœ‰ä¸Šå‡å­åºåˆ—ä¸­ï¼Œç»“å°¾æœ€å°çš„æ˜¯å­åºåˆ— [2, 3] ï¼Œå› æ­¤ tail[1] = 3ï¼›
- ä¸‹æ ‡å’Œé•¿åº¦æœ‰æ•°å€¼ä¸º 1 çš„åå·®ï¼›

çŠ¶æ€å®šä¹‰å…¶å®ä¹Ÿæè¿°äº†çŠ¶æ€è½¬ç§»æ–¹ç¨‹

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼š

ä»ç›´è§‰ä¸Šçœ‹ï¼Œ**æ•°ç»„ `tail` æ˜¯ä¸€ä¸ªä¸¥æ ¼ä¸Šå‡æ•°ç»„**ã€‚ä¸‹é¢æ˜¯è¯æ˜

**è¯æ˜**ï¼šå³å¯¹äºä»»æ„çš„ä¸‹æ ‡ `0 <= i < j < len` ï¼Œéƒ½æœ‰ `tail[i] < tail[j]`

ä½¿ç”¨åè¯æ³•ï¼šå‡è®¾å¯¹äºä»»æ„çš„ä¸‹æ ‡ `i` < `j` ï¼Œå­˜åœ¨æŸä¸ª `tail[i] >= tail[j]`

å¯¹äºæ­¤å¤„çš„ tail[i] è€Œè¨€ï¼Œå¯¹åº”ä¸€ä¸ªä¸Šå‡å­åºåˆ— [a_0, a_1, ..., a_i]ï¼Œä¾æ®å®šä¹‰ `tail[i] = a_i`

å¯¹äºæ­¤å¤„çš„ tail[j] è€Œè¨€ï¼Œå¯¹åº”ä¸€ä¸ªä¸Šå‡å­åºåˆ— [b_0, b_1, ..., b_i, ... , b_j]ï¼Œä¾æ®å®šä¹‰ `tail[j] = b_j`

ç”±äº `tail[i] >= tail[j]`ï¼Œç­‰ä»·äº `a_i >= b_j`ï¼Œè€Œåœ¨ä¸Šå‡å­åºåˆ— [b_0, b_1, ..., b_i, ... , b_j] ä¸­ï¼Œ`b_i` ä¸¥æ ¼å°äº `b_j` ï¼Œæ•…æœ‰ `a_i >= b_j > b_i`

åˆ™ä¸Šå‡å­åºåˆ— [b_0, b_1, ..., b_i] æ˜¯ä¸€ä¸ªé•¿åº¦ä¹Ÿä¸º `i + 1` ä½†æ˜¯ç»“å°¾æ›´å°çš„æ•°ç»„ï¼Œä¸ `a_i` çš„æœ€å°æ€§çŸ›ç›¾

å› æ­¤åŸå‘½é¢˜æˆç«‹ï¼ˆè¯é—­ï¼‰

---

**å› æ­¤åªéœ€è¦ç»´æŠ¤çŠ¶æ€æ•°ç»„ `tail` çš„å®šä¹‰ï¼Œå®ƒçš„é•¿åº¦å°±æ˜¯æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦**ã€‚ä¸‹é¢è¯´æ˜åœ¨éå†ä¸­ï¼Œå¦‚ä½•ç»´æŠ¤çŠ¶æ€æ•°ç»„ `tail` çš„å®šä¹‰

1. åœ¨éå†æ•°ç»„ nums çš„è¿‡ç¨‹ä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ªæ–°æ•° numï¼Œå¦‚æœè¿™ä¸ªæ•°ã€Œä¸¥æ ¼å¤§äºã€æœ‰åºæ•°ç»„ tail çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°±æŠŠ num æ”¾åœ¨æœ‰åºæ•°ç»„ tail çš„åé¢ï¼Œå¦åˆ™è¿›å…¥ç¬¬ 2 ç‚¹ï¼›
2. åœ¨æœ‰åºæ•°ç»„ `tail` ä¸­æŸ¥æ‰¾ç¬¬ 1 ä¸ªç­‰äºå¤§äº `num` çš„é‚£ä¸ªæ•°ï¼Œè¯•å›¾è®©å®ƒå˜å°ï¼›
   - å¦‚æœæœ‰åºæ•°ç»„ `tail` ä¸­å­˜åœ¨ **ç­‰äº** `num` çš„å…ƒç´ ï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œå› ä¸ºä»¥ `num` ç»“å°¾çš„æœ€çŸ­çš„ã€Œä¸Šå‡å­åºåˆ—ã€å·²ç»å­˜åœ¨ï¼›
   - å¦‚æœæœ‰åºæ•°ç»„ `tail` ä¸­å­˜åœ¨ **å¤§äº** `num` çš„å…ƒç´ ï¼Œæ‰¾åˆ°ç¬¬ 1 ä¸ªï¼Œè®©å®ƒå˜å°ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ‰¾åˆ°äº†ä¸€ä¸ª **ç»“å°¾æ›´å°**çš„**ç›¸åŒé•¿åº¦**çš„ä¸Šå‡å­åºåˆ—ã€‚

è¯´æ˜ï¼š

- æˆ‘ä»¬å†çœ‹ä¸€ä¸‹æ•°ç»„ tail[i] çš„å®šä¹‰ï¼šé•¿åº¦ä¸º i + 1 çš„ **æ‰€æœ‰** æœ€é•¿ä¸Šå‡å­åºåˆ—çš„ç»“å°¾çš„æœ€å°å€¼ã€‚å› æ­¤ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä¸æ–­çš„åˆ·æ–° tail æ•°ç»„ï¼Œä½¿å…¶æ•´ä½“ä¸Šå˜å°ï¼Œæœ€åä½ç½®ä¸Šçš„æ•°ä¹Ÿå˜å°ï¼Œ**ä»¥ä¾¿è®©æ–°æ¥çš„æ•°æ‰©å…… tail æ•°ç»„**
- è¿™ä¸€æ­¥å¯ä»¥è®¤ä¸ºæ˜¯ã€Œè´ªå¿ƒç®—æ³•ã€ï¼Œæ€»æ˜¯åšå‡ºåœ¨å½“å‰çœ‹æ¥æœ€å¥½çš„é€‰æ‹©ï¼Œå½“å‰ã€Œæœ€å¥½çš„é€‰æ‹©ã€æ˜¯ï¼šå½“å‰åªè®©è®©ç¬¬ 1 ä¸ªä¸¥æ ¼å¤§äº nums[i] çš„æ•°å˜å°ï¼Œå˜æˆ nums[i]ï¼Œè¿™ä¸€æ­¥æ“ä½œæ˜¯ã€Œæ— åæ•ˆæ€§ã€çš„ï¼›
- ç”±äºæ˜¯åœ¨æœ‰åºæ•°ç»„ä¸­çš„æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ã€ŒäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ã€ã€‚

**3. åˆå§‹åŒ–**ï¼š

éå†ç¬¬ 1 ä¸ªæ•° `nums[0]`ï¼Œç›´æ¥æ”¾åœ¨æœ‰åºæ•°ç»„ `tail` çš„å¼€å¤´ `tail[0] = nums[0]`

**4. è¾“å‡º**ï¼š

æœ‰åºæ•°ç»„ `tail` çš„é•¿åº¦ï¼Œå°±æ˜¯æ‰€æ±‚çš„ã€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€çš„é•¿åº¦

**5. ç©ºé—´ä¼˜åŒ–**ï¼š

æ— æ³•ä¼˜åŒ–ç©ºé—´

**å¤æ‚åº¦åˆ†æ**ï¼š

æ—¶é—´å¤æ‚åº¦ï¼š`O(Nlog N)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(N)`

```c++
class Solution {
public:
    int lengthOfLIS(vector<int>& nums) {
        vector<int> tail;
        tail.push_back(nums[0]);
        for (int i = 1; i < nums.size(); i++) {
            int end = *tail.rbegin();
            if (nums[i] > end) {
                tail.push_back(nums[i]);
            } else if (nums[i] == end) {
                continue;
            } else if (nums[i] < end) {
                auto it = lower_bound(tail.begin(), tail.end(), nums[i]);
                *it = nums[i];
            }
        }
        return tail.size();
    }
};
```

## äºŒã€æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰

è®¡ç®—æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLongest Common Subsequenceï¼Œç®€ç§° LCSï¼‰æ˜¯ä¸€é“ç»å…¸çš„åŠ¨æ€è§„åˆ’é¢˜ç›®

é¢˜ç›®ï¼š[1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode-cn.com/problems/longest-common-subsequence/)

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ å…¬å…±å­åºåˆ— çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ å…¬å…±å­åºåˆ— ï¼Œè¿”å› 0 ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²çš„ å­åºåˆ— æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚

```
è¾“å…¥ï¼štext1 = "abcde", text2 = "ace" 
è¾“å‡ºï¼š3  
è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "ace" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚

è¾“å…¥ï¼štext1 = "abc", text2 = "abc"
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "abc" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚

è¾“å…¥ï¼štext1 = "abc", text2 = "def"
è¾“å‡ºï¼š0
è§£é‡Šï¼šä¸¤ä¸ªå­—ç¬¦ä¸²æ²¡æœ‰å…¬å…±å­åºåˆ—ï¼Œè¿”å› 0 ã€‚
```

### åŠ¨æ€è§„åˆ’

åŠ¨æ€è§„åˆ’æ˜¯æœ‰å¥—è·¯çš„ï¼š

- å•ä¸ªæ•°ç»„æˆ–è€…å­—ç¬¦ä¸²è¦ç”¨åŠ¨æ€è§„åˆ’æ—¶ï¼Œå¯ä»¥æŠŠåŠ¨æ€è§„åˆ’ `dp[i]` å®šä¹‰ä¸º `nums[0:i]` ä¸­æƒ³è¦æ±‚çš„ç»“æœï¼›
- å½“ä¸¤ä¸ªæ•°ç»„æˆ–è€…å­—ç¬¦ä¸²è¦ç”¨åŠ¨æ€è§„åˆ’æ—¶ï¼Œå¯ä»¥æŠŠåŠ¨æ€è§„åˆ’å®šä¹‰æˆä¸¤ç»´çš„ `dp[i][j]` ï¼Œå…¶å«ä¹‰æ˜¯åœ¨ `A[0:i]` ä¸ `B[0:j]` ä¹‹é—´åŒ¹é…å¾—åˆ°çš„æƒ³è¦çš„ç»“æœã€‚

**1. çŠ¶æ€å®šä¹‰**

å¯¹äºæœ¬é¢˜ï¼Œå®šä¹‰ `dp[i][j]` è¡¨ç¤º `text1[0:i-1]` å’Œ `text2[0:j-1]` çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦

> æ³¨ï¼š`text1[0:i-1]` è¡¨ç¤ºçš„æ˜¯ text1 çš„ ç¬¬ 0 ä¸ªå…ƒç´ åˆ°ç¬¬ i - 1 ä¸ªå…ƒç´ ï¼Œä¸¤ç«¯éƒ½åŒ…å«

ä¹‹æ‰€ä»¥ `dp[i][j]` çš„å®šä¹‰ä¸æ˜¯ `text1[0:i]` å’Œ `text2[0:j]` ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å½“ i = 0 æˆ–è€… j = 0 çš„æ—¶å€™ï¼Œ`dp[i][j]` è¡¨ç¤ºçš„ä¸ºç©ºå­—ç¬¦ä¸²å’Œå¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²çš„åŒ¹é…ï¼Œè¿™æ · `dp[i][j]` å¯ä»¥åˆå§‹åŒ–ä¸º 0

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

- å½“ `text1[i - 1] == text2[j - 1]` æ—¶ï¼Œè¯´æ˜ä¸¤ä¸ªå­å­—ç¬¦ä¸²çš„æœ€åä¸€ä½ç›¸ç­‰ï¼Œæ‰€ä»¥æœ€é•¿å…¬å…±å­åºåˆ—åˆå¢åŠ äº† 1ï¼Œæ‰€ä»¥ `dp[i][j] = dp[i - 1][j - 1] + 1`ï¼›ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å¯¹äº ac å’Œ bc è€Œè¨€ï¼Œä»–ä»¬çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ç­‰äº a å’Œ b çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ 0 + 1 = 1

- å½“ `text1[i - 1] != text2[j - 1]` æ—¶ï¼Œè¯´æ˜ä¸¤ä¸ªå­å­—ç¬¦ä¸²çš„æœ€åä¸€ä½ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„çŠ¶æ€ `dp[i][j]` åº”è¯¥æ˜¯ `dp[i - 1][j]` å’Œ `dp[i][j - 1]` çš„æœ€å¤§å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å¯¹äº ace å’Œ bc è€Œè¨€ï¼Œä»–ä»¬çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ç­‰äº â‘  ace å’Œ b çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦0 ä¸ â‘¡ ac å’Œ bc çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦1 çš„æœ€å¤§å€¼ï¼Œå³ 1

> é€‰æ‹© `dp[i - 1][j]` å’Œ `dp[i][j - 1]` ä¸­æœ€å¤§å€¼çš„åˆç†æ€§åœ¨äºï¼šæˆ‘ä»¬éœ€è¦åœ¨ `d[i][j]`  è¿™ä¸ªä½ç½®ä¸Šé€‰æ‹©ä¸€ä¸ªå­—æ¯ï¼ˆæ¥è‡ªäº `text1[i-1]`ã€`text2[j-1]`ï¼‰ä½œä¸ºç»“å°¾ï¼Œå¿…ç„¶å¸Œæœ›è¿™ä¸ªå­—æ¯ä»£è¡¨çš„å­å­—ç¬¦ä¸²æœ€é•¿ï¼Œé‚£ä¹ˆåé¢çš„è®¡ç®—æ‰èƒ½åŸºäºæœ€ä¼˜çš„å­é—®é¢˜

$$
dp[i][j] = 
\begin{cases}
dp[i-1][j-1]+1 & text1[i-1]=text2[j-1] \\ \\
max(dp[i-1][j], \ dp[i][j-1]) & text1[i-1]\neq text2[j-1]
\end{cases}
$$

**3. çŠ¶æ€çš„åˆå§‹åŒ–**

åˆå§‹åŒ–å°±æ˜¯è¦çœ‹å½“ i = 0 ä¸ j = 0 æ—¶ï¼Œ`dp[i][j]` åº”è¯¥å–å€¼ä¸ºå¤šå°‘ã€‚

å½“ i = 0 æ—¶ï¼Œ`dp[0][j]` è¡¨ç¤ºçš„æ˜¯ text1 ä¸­å–ç©ºå­—ç¬¦ä¸² è·Ÿ text2 çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œç»“æœè‚¯å®šä¸º 0.

å½“ j = 0 æ—¶ï¼Œ`dp[i][0]` è¡¨ç¤ºçš„æ˜¯ text2 ä¸­å–ç©ºå­—ç¬¦ä¸² è·Ÿ text1 çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œç»“æœè‚¯å®šä¸º 0.

ç»¼ä¸Šï¼Œå½“ i = 0 æˆ–è€… j = 0 æ—¶ï¼Œ`dp[i][j]` åˆå§‹åŒ–ä¸º 0.

**4. éå†æ–¹å‘ä¸èŒƒå›´**

ç”±äº `dp[i][j]` ä¾èµ–ä¸ `dp[i - 1][j - 1]` , `dp[i - 1][j]`, `dp[i][j - 1]`ï¼Œæ‰€ä»¥ i å’Œ j çš„éå†é¡ºåºè‚¯å®šæ˜¯ä»å°åˆ°å¤§çš„ã€‚

å¦å¤–ï¼Œç”±äºå½“ i æˆ– j å–å€¼ä¸º 0 çš„æ—¶å€™ï¼Œ`dp[i][j] = 0`ï¼Œè€Œ dp æ•°ç»„æœ¬èº«åˆå§‹åŒ–å°±æ˜¯ä¸º 0ï¼Œæ‰€ä»¥ï¼Œç›´æ¥è®© i å’Œ j ä» 1 å¼€å§‹éå†ã€‚éå†çš„ç»“æŸåº”è¯¥æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º len(text1) å’Œ len(text2)

**5. æœ€ç»ˆè¿”å›ç»“æœ**

ç”±äº `dp[i][j]` çš„å«ä¹‰æ˜¯ `text1[0:i-1]` å’Œ `text2[0:j-1]` çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚æˆ‘ä»¬æœ€ç»ˆå¸Œæœ›æ±‚çš„æ˜¯ text1 å’Œ text2 çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚æ‰€ä»¥éœ€è¦è¿”å›çš„ç»“æœæ˜¯ i = len(text1) å¹¶ä¸” j = len(text2) æ—¶çš„ `dp[len(text1)][len(text2)]`

**å¤æ‚åº¦åˆ†æ**ï¼š

æ—¶é—´å¤æ‚åº¦ï¼š`O(MN)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(MN`

```c++
class Solution {
public:
    int longestCommonSubsequence(string text1, string text2) {
        int n = text1.size();
        int m = text2.size();
        vector<vector<int>> dp(n + 1, vector<int>(m + 1, 0));
        for (int i = 1; i < n + 1; i++) {
            for (int j = 1; j < m + 1; j++) {
                if (text1[i - 1] == text2[j - 1]) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                } else {
                    dp[i][j] = max(dp[i][j - 1], dp[i - 1][j]);
                }
            }
        }
        return dp[n][m];
    }
};
```

## ä¸‰ã€LCS é—®é¢˜è½¬åŒ–ä¸º LIS é—®é¢˜ï¼ˆæ—¶é—´å¤æ‚åº¦ä¼˜åŒ–ï¼‰

é¢˜ç›®ï¼š[1713. å¾—åˆ°å­åºåˆ—çš„æœ€å°‘æ“ä½œæ¬¡æ•°](https://leetcode-cn.com/problems/minimum-operations-to-make-a-subsequence/)

ç»™ä½ ä¸€ä¸ªæ•°ç»„ target ï¼ŒåŒ…å«è‹¥å¹² äº’ä¸ç›¸åŒ çš„æ•´æ•°ï¼Œä»¥åŠå¦ä¸€ä¸ªæ•´æ•°æ•°ç»„ arr ï¼Œarr å¯èƒ½ åŒ…å«é‡å¤å…ƒç´ ã€‚

æ¯ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥åœ¨ arr çš„ä»»æ„ä½ç½®æ’å…¥ä»»ä¸€æ•´æ•°ã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœ arr = [1,4,1,2] ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ä¸­é—´æ·»åŠ  3 å¾—åˆ° [1,4,3,1,2] ã€‚ä½ å¯ä»¥åœ¨æ•°ç»„æœ€å¼€å§‹æˆ–æœ€åé¢æ·»åŠ æ•´æ•°ã€‚

è¯·ä½ è¿”å› æœ€å°‘ æ“ä½œæ¬¡æ•°ï¼Œä½¿å¾— target æˆä¸º arr çš„ä¸€ä¸ªå­åºåˆ—ã€‚

- 1 <= target.length, arr.length <= 10^5
- 1 <= target[i], arr[i] <= 10^9
- target ä¸åŒ…å«ä»»ä½•é‡å¤å…ƒç´ ã€‚

```
è¾“å…¥ï¼štarget = [5,1,3], arr = [9,4,2,3,4]
è¾“å‡ºï¼š2
è§£é‡Šï¼šä½ å¯ä»¥æ·»åŠ  5 å’Œ 1 ï¼Œä½¿å¾— arr å˜ä¸º [5,9,4,1,2,3,4] ï¼Œtarget ä¸º arr çš„å­åºåˆ—ã€‚

è¾“å…¥ï¼štarget = [6,4,8,1,3,2], arr = [4,7,6,2,3,8,6,1]
è¾“å‡ºï¼š3
```

### æ€è·¯å†ç¨‹

çœ‹å®Œé¢˜ç›®ï¼Œç­”æ¡ˆæ˜¾ç„¶æ˜¯ï¼Œå…ˆæ±‚å‡ºä¸¤ä¸ªæ•°ç»„çš„æœ€å¤§å…¬å…±å­åºåˆ—çš„é•¿åº¦ lenï¼Œæœ€å target.size() - len

ä½†æ˜¯ä¸¤ä¸ªæ•°ç»„çš„æœ€é•¿éƒ½ä¸º 10^5ï¼Œä¸Šè¿°æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nm)ï¼Œæ˜¾ç„¶ä¼šè¶…æ—¶

é‚£ä¹ˆï¼Œçœ‹åˆ°å¦ä¸€ä¸ªæ¡ä»¶ï¼š `target` åŒ…å«è‹¥å¹² **äº’ä¸ç›¸åŒ** çš„æ•´æ•°

å¼•å¯¼æˆ‘ä»¬è¦å°† **LCS é—®é¢˜è½¬åŒ–ä¸º LIS é—®é¢˜**ï¼ŒæŠŠæ—¶é—´å¤æ‚åº¦ O(nm) é™è‡³ O(nlogn)

å£°æ˜ï¼š**LCS è½¬åŒ–ä¸º LIS é—®é¢˜çš„å…ˆå†³æ¡ä»¶æ˜¯ï¼Œå…¶ä¸­ä¸€ä¸ªæ•°ç»„å†…çš„å…ƒç´ ã€Œä¸é‡å¤ã€**ï¼Œä¾‹å¦‚ target æ•°ç»„

è¿˜æœ‰ä¸ªäº‹å®è¦æ˜ç¡®ï¼š**ã€Œä¸‹æ ‡ä¸Šå‡ã€æ„å‘³ç€ã€Œé¡ºåºæ’å¸ƒã€ï¼Œã€Œé¡ºåºæ’å¸ƒã€æ„å‘³ç€ã€Œä¸‹æ ‡ä¸Šå‡ã€**ï¼Œè¿™æ˜¯å¯ä»¥è¿›è¡Œè½¬åŒ–çš„ç†è®ºåŸºç¡€

### å¦‚ä½•è½¬åŒ–

**1. é¢„å¤„ç†**ï¼šæ‰¾å‡º arr ä¸­ä¸”ã€ŒåŒæ—¶å­˜åœ¨ã€äº target ä¸­çš„å…ƒç´ ï¼Œå°†è¿™äº›ã€ŒåŒæ—¶å­˜åœ¨ã€å…ƒç´ åœ¨ã€Œtarget ä¸­çš„ä¸‹æ ‡ã€ï¼ŒæŒ‰ç…§ã€Œarr çš„é¡ºåºã€ç¼“å­˜ä¸‹æ¥

ä¾‹å¦‚ï¼š

```
target = [6,4,8,1,3,2]
arr = [4,7,6,2,3,8,6,1]
index_list = [1,0,5,4,2,0,3]
```

```c++
unordered_map<int, int> valIdx_map;
for (int i = 0; i < n; i++) {
    valIdx_map[target[i]] = i;
}
vector<int> index_list;
for (int num : arr) {
    if (valIdx_map.count(num)) {
        // cout << num << " " << "idx in target:" << valIdx_map[num] << endl;
        index_list.push_back(valIdx_map[num]);
    }
}
```

**2. å°† LCS è½¬åŒ–ä¸º LIS é—®é¢˜**

é¦–å…ˆçœ‹ä¸‹ index_list å†…çš„è¿™äº›å…ƒç´ å…·å¤‡ä»€ä¹ˆæ€§è´¨ï¼š

- é‡Œé¢å­˜å‚¨çš„å…ƒç´ æ˜¯ target çš„ä¸‹æ ‡
- æ˜¯æŒ‰ç…§åœ¨ arr ä¸­çš„é¡ºåºæ„æˆçš„
- æ ¹æ® target çš„ä¸‹æ ‡ï¼Œæ£€ç´¢å‡ºçš„æ•°ï¼Œæ˜¯å±äº target å’Œ arr å…¬å…±çš„

åœ¨è¿™æ ·ä¸€ä¸ª index_list ä¸­æ±‚å‡ºã€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€ï¼Œè¿™ä¸ª LIS å…·å¤‡ä»€ä¹ˆæ€§è´¨ï¼š

- ã€ŒåŒæ—¶ã€æ»¡è¶³äº†åœ¨ target å’Œ arr ä¸­æŒ‰ç…§ã€Œé¡ºåºã€æ’å¸ƒï¼Œ**ã€Œä¸‹æ ‡ä¸Šå‡ã€æ„å‘³ç€ã€Œé¡ºåºæ’å¸ƒã€ï¼Œã€Œé¡ºåºæ’å¸ƒã€æ„å‘³ç€ã€Œä¸‹æ ‡ä¸Šå‡ã€**
- å…¶ä¸­çš„å…ƒç´ ï¼Œã€ŒåŒæ—¶ã€å­˜åœ¨äº target å’Œ arr ä¸­ï¼Œä¹Ÿå°±æ˜¯å…¬å…±çš„

è¿™æ ·çš„ä¸€ä¸ªåºåˆ—ï¼Œå¯¹äº index_list æ˜¯ã€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€ï¼Œå¯¹äº target å’Œ arr å°±æ˜¯ã€Œæœ€é•¿å…¬å…±å­åºåˆ—ã€

æ±‚è§£çš„è¿‡ç¨‹ï¼Œå°±æ˜¯å°† LCS é—®é¢˜è½¬åŒ–ä¸º LIS é—®é¢˜

> é—®ï¼šä¸ºä»€ä¹ˆå…¶ä¸­ä¸€ä¸ªæ•°ç»„å†…çš„å…ƒç´ ã€Œä¸é‡å¤ã€ï¼Œè¿™æ ·çš„è½¬æ¢æ–¹å¼æ‰èƒ½ç”Ÿæ•ˆå‘¢ï¼Ÿ
>
> - å¦‚æœ target æ•°ç»„ä¸­æŸä¸ªå…ƒç´ é‡å¤å‡ºç°ï¼Œåº”è¯¥é€‰æ‹©å…¶ä¸­çš„å“ªä¸ªä¸‹æ ‡æ¥æ„æˆæœ€ç»ˆçš„é‚£ä¸ªæœ€é•¿ä¸Šå‡å­åºåˆ—ã€ï¼Œé‚£ä¹ˆå°±åˆå¾—ä¸€ä¸ªä¸ªåˆ¤æ–­è¿™äº›é‡å¤å€¼O(n)ï¼Œæ•´ä½“çš„æ—¶é—´å¤æ‚åº¦é€€åŒ–ä¸º O(nm)ï¼Œè¿™æ ·çš„è½¬æ¢æ–¹å¼åˆæœ‰ä»€ä¹ˆæ„ä¹‰
>
> - å¦‚æœ target æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ã€Œä¸é‡å¤ã€ï¼Œç›´æ¥å°±å¯é€‰ä¸­åœ¨targetå”¯ä¸€çš„å…¬å…±å…ƒç´  O(1)ï¼ŒåµŒå…¥åˆ°LCSçš„O(nlogn)çš„æ±‚è§£è¿‡ç¨‹ä¸­ï¼Œæ•´ä½“çš„æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–ä¸ºO(nlogn)

æ—¶é—´å¤æ‚åº¦ï¼š`O(nlogn)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`

```c++
class Solution {
public:
    int minOperations(vector<int>& target, vector<int>& arr) {
        int n = target.size();
        int m = arr.size();

        unordered_map<int, int> valIdx_map;
        for (int i = 0; i < n; i++) {
            valIdx_map[target[i]] = i;
        }
        vector<int> index_list;
        for (int num : arr) {
            if (valIdx_map.count(num)) {
                index_list.push_back(valIdx_map[num]);
            }
        }
        if (index_list.empty()) {  // æ²¡æœ‰å…¬å…±å­åºåˆ—
            return n;
        }

        vector<int> tail;
        tail.push_back(index_list[0]);
        for (int i = 1; i < index_list.size(); i++) {
            int cur = index_list[i];
            int end = *tail.rbegin();
            if (cur > end) {
                tail.push_back(cur);
            } else {
                auto it = lower_bound(tail.begin(), tail.end(), cur);
                *it = cur;
            }
        }
        return n - tail.size();
    }
};
```

## å››ã€æœ€é•¿ä¸Šå‡å­æ•°ç»„

é¢˜ç›®ï¼š[674. æœ€é•¿è¿ç»­é€’å¢åºåˆ—](https://leetcode-cn.com/problems/longest-continuous-increasing-subsequence/)

ç»™å®šä¸€ä¸ªæœªç»æ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°æœ€é•¿ä¸” **è¿ç»­é€’å¢çš„å­åºåˆ—**ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚

- `1 <= nums.length <= 104`
- `-109 <= nums[i] <= 109`

```
è¾“å…¥ï¼šnums = [1,3,5,4,7]
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€é•¿è¿ç»­é€’å¢åºåˆ—æ˜¯ [1,3,5], é•¿åº¦ä¸º3ã€‚
å°½ç®¡ [1,3,5,7] ä¹Ÿæ˜¯å‡åºçš„å­åºåˆ—, ä½†å®ƒä¸æ˜¯è¿ç»­çš„ï¼Œå› ä¸º 5 å’Œ 7 åœ¨åŸæ•°ç»„é‡Œè¢« 4 éš”å¼€ã€‚ 

è¾“å…¥ï¼šnums = [2,2,2,2,2]
è¾“å‡ºï¼š1
è§£é‡Šï¼šæœ€é•¿è¿ç»­é€’å¢åºåˆ—æ˜¯ [2], é•¿åº¦ä¸º1ã€‚
```

### åŠ¨æ€è§„åˆ’

**1. å®šä¹‰çŠ¶æ€**

dp[i] ä¸ºä»¥ nums[i] ç»“å°¾çš„æœ€é•¿é€’å¢å­æ•°ç»„çš„é•¿åº¦

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**
$$
dp[i] =
\begin{cases}
dp[i-1] + 1 & nums[i] > nums[i-1] \\ \\
1 & nums[i] \leq nums[i-1]
\end{cases}
$$
**3. åˆå§‹åŒ–**

 dp é»˜è®¤éƒ½ä¸º 1ï¼Œè‡ªèº«

**4. è¾“å‡º**

dp ä¸­çš„æœ€å¤§å€¼

**5. ç©ºé—´ä¼˜åŒ–**

çŠ¶æ€è½¬ç§»è¿‡ç¨‹ä¸­ï¼Œä»…éœ€çŸ¥é“å‰ä¸€ä¸ªçš„æœ€é•¿é€’å¢å­æ•°ç»„çš„é•¿åº¦ dp[i-1]ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå˜é‡ pre è®°å½•

**å¤æ‚åº¦åˆ†æ**ï¼š

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`ï¼Œ`O(1)`

```c++
class Solution {
public:
    int findLengthOfLCIS(vector<int>& nums) {
        int n = nums.size();
        // dp[i] ä¸ºä»¥ nums[i] ç»“å°¾çš„æœ€é•¿é€’å¢å­æ•°ç»„çš„é•¿åº¦ï¼Œé»˜è®¤ä¸º 1ï¼Œè‡ªèº«
        vector<int> dp(n, 1);
        int ans = 1;
        for (int i = 1; i < n; i++) {
            if (nums[i] > nums[i - 1]) {
                dp[i] = dp[i - 1] + 1;
            } else if (nums[i] <= nums[i - 1]) {
                dp[i] = 1;  // ä¹Ÿå¯ä»¥ä¸åšå¤„ç†
            }
            ans = max(ans, dp[i]);
        }
        return ans;
    }
};
```

```c++
class Solution {
public:
    int findLengthOfLCIS(vector<int>& nums) {
        int n = nums.size();
        int pre = 1;
        int ans = 1;
        for (int i = 1; i < n; i++) {
            if (nums[i] > nums[i - 1]) {
                pre++;
            } else if (nums[i] <= nums[i - 1]) {
                pre = 1;
            }
            ans = max(ans, pre);
        }
        return ans;
    }
};
```

## äº”ã€æœ€é•¿å…¬å…±å­æ•°ç»„

é¢˜ç›®ï¼š[718. æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/)

ç»™ä¸¤ä¸ªæ•´æ•°æ•°ç»„ `nums1` å’Œ `nums2` ï¼Œè¿”å› *ä¸¤ä¸ªæ•°ç»„ä¸­ **å…¬å…±çš„** ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦* ã€‚

- `1 <= nums1.length, nums2.length <= 1000`
- `0 <= nums1[i], nums2[i] <= 100`

```
è¾“å…¥ï¼šnums1 = [1,2,3,2,1], nums2 = [3,2,1,4,7]
è¾“å‡ºï¼š3
è§£é‡Šï¼šé•¿åº¦æœ€é•¿çš„å…¬å…±å­æ•°ç»„æ˜¯ [3,2,1] 

è¾“å…¥ï¼šnums1 = [0,0,0,0,0], nums2 = [0,0,0,0,0]
è¾“å‡ºï¼š5
```

### åŠ¨æ€è§„åˆ’

**1. å®šä¹‰çŠ¶æ€**

`dp[i][j]` ä»£è¡¨ä»¥ `nums1[i-1]` ç»“å°¾å’Œ `nums2[j-1]` ç»“å°¾æ„æˆçš„æœ€é•¿å…¬å…±å­æ•°ç»„çš„ã€Œé•¿åº¦ã€

> ä¸å®šä¹‰ LCS ç›¸åŒçš„æ˜¯éƒ½éœ€è¦å°† dp å¤šç”³è¯·ä¸€ä½ï¼Œ`dp[0][j]` å’Œ `dp[i][0]` ä¸­çš„ 0 ä»£è¡¨ä¸ä½¿ç”¨è¿™ä¸ªæ•°ç»„çš„æ•°
>
> ä¸åŒçš„æ˜¯ï¼Œéœ€è¦è®°å½•çš„æ˜¯ã€Œç»“å°¾ã€æ„æˆå…¬å…±æ•°ç»„çš„é•¿åº¦ï¼ŒLCS éœ€è¦çš„æ˜¯ nums1[0,i-1] å’Œ nums2[0,j-1] ã€ŒåŒºé—´å†…ã€å…¬å…±æ•°ç»„çš„é•¿åº¦

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

èƒ½å¤Ÿè¿ç»­æ¨å¯¼æ˜¯å¦ä¸ºã€Œå…¬å…±å­æ•°ç»„ã€çš„ä¸¤ä¸ªæ¡ä»¶æ˜¯ï¼šå½“å‰ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸åŒï¼›è¿™ä¸¤ä¸ªå…ƒç´ å‰çš„å­æ•°ç»„ï¼Œæ˜¯å¦æ˜¯å…¬å…±çš„

å› æ­¤ï¼Œå¯ä»¥å†™å‡ºçŠ¶æ€è½¬ç§»çš„è¿‡ç¨‹

- å½“å‰ä¸¤å…ƒç´ ã€Œç›¸ç­‰ã€ï¼Œ`nums1[i-1] == nums2[j-1]`
  - å‰é¢æ˜¯å…¬å…±å­æ•°ç»„ï¼Œ`dp[i][j]` = å‰é¢å­æ•°ç»„çš„é•¿åº¦ + å½“å‰ä¸¤ä¸ªç›¸åŒçš„å…ƒç´ 
  - å‰é¢ä¸æ˜¯å…¬å…±å­æ•°ç»„ï¼Œå½“å‰ä½ç½®çš„ `dp[i][j]` åªæœ‰å½“å‰ä¸¤ä¸ªç›¸åŒå…ƒç´ æ„æˆå…¬å…±å­æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯ 1
- å½“å‰ä¸¤å…ƒç´ ã€Œä¸ç›¸ç­‰ã€ï¼Œä»¥è¿™ä¸¤ä¸ªå…ƒç´ ç»“å°¾æ„ä¸æˆå…¬å…±å­æ•°ç»„ï¼Œ`dp[i][j]` ç›´æ¥ç½®ä¸º0

**3. åˆå§‹åŒ–**

`dp[i][0]`  `dp[0][j]` ä»»æ„ä¸€ä¸ªæ•°ç»„ä¸ºç©ºæ—¶ï¼Œæœ€é•¿å…¬å…±å­æ•°ç»„é•¿åº¦ä¸º0

**4. è¾“å‡º**

éå†çš„è¿‡ç¨‹ä¸­ï¼Œç»Ÿè®¡ `dp[i][j]` çš„æœ€å¤§å€¼

**å¤æ‚åº¦åˆ†æ**

æ—¶é—´å¤æ‚åº¦ï¼š`O(n^2)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n^2)`

```c++
class Solution {
public:
    int findLength(vector<int>& nums1, vector<int>& nums2) {
        int n = nums1.size();
        int m = nums2.size();
        vector<vector<int>> dp(n + 1, vector<int>(m + 1, 0));

        int maxLen = 0;  // æœ€é•¿é•¿åº¦é»˜è®¤ä¸º 0ï¼Œå³ä¸å­˜åœ¨
        for (int i = 1; i < n + 1; i++) {
            for (int j = 1; j < m + 1; j++) {
                if (nums1[i - 1] == nums2[j - 1]) {  // å½“å‰å…ƒç´ ç›¸ç­‰
                    if (dp[i - 1][j - 1] != 0) {     // ä¸”å‰é¢ä¹Ÿæ˜¯å…¬å…±å­æ•°ç»„
                        dp[i][j] = dp[i - 1][j - 1] + 1;
                    } else {  // å‰é¢ä¸æ˜¯å…¬å…±å­æ•°ç»„
                        dp[i][j] = 1;
                    }
                } else {
                    dp[i][j] = 0;
                }
                maxLen = max(maxLen, dp[i][j]);
            }
        }
        return maxLen;
    }
};
```

## å…­ã€æœ€å¤§å­æ•°ç»„å’Œ

é¢˜ç›®ï¼š[53. æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/maximum-subarray/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚

**å­æ•°ç»„** æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚

```
è¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4]
è¾“å‡ºï¼š6
è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6 ã€‚

è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š1

è¾“å…¥ï¼šnums = [5,4,-1,7,8]
è¾“å‡ºï¼š23
```

é¢˜ç›®è¦æˆ‘ä»¬æ‰¾å‡ºå’Œæœ€å¤§çš„è¿ç»­å­æ•°ç»„çš„å€¼æ˜¯å¤šå°‘ï¼Œã€Œè¿ç»­ã€æ˜¯å…³é”®å­—ï¼Œè¿ç»­å¾ˆé‡è¦ï¼Œä¸æ˜¯å­åºåˆ—ã€‚

é¢˜ç›®åªè¦æ±‚è¿”å›ç»“æœï¼Œä¸è¦æ±‚å¾—åˆ°æœ€å¤§çš„è¿ç»­å­æ•°ç»„æ˜¯å“ªä¸€ä¸ªã€‚è¿™æ ·çš„é—®é¢˜é€šå¸¸å¯ä»¥ä½¿ç”¨ã€ŒåŠ¨æ€è§„åˆ’ã€è§£å†³ã€‚

### 1ã€åŠ¨æ€è§„åˆ’

æŒæ¡åŠ¨æ€è§„åˆ’é—®é¢˜è®¾è®¡çŠ¶æ€çš„æŠ€å·§ã€Œ**æ— åæ•ˆæ€§**ã€

**1. å®šä¹‰çŠ¶æ€**

è®¾è®¡çŠ¶æ€æ€è·¯ï¼šæŠŠä¸ç¡®å®šçš„å› ç´ ç¡®å®šä¸‹æ¥ï¼Œè¿›è€ŒæŠŠå­é—®é¢˜å®šä¹‰æ¸…æ¥šï¼ŒæŠŠå­é—®é¢˜å®šä¹‰å¾—ç®€å•ã€‚åŠ¨æ€è§„åˆ’çš„æ€æƒ³é€šè¿‡è§£å†³äº†ä¸€ä¸ªä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œè¿›è€ŒæŠŠç®€å•çš„é—®é¢˜çš„è§£ç»„æˆäº†å¤æ‚çš„é—®é¢˜çš„è§£ã€‚

`dp[i]`ï¼šè¡¨ç¤ºä»¥ `nums[i]` **ç»“å°¾** çš„ **è¿ç»­** å­æ•°ç»„çš„æœ€å¤§å’Œ

**è¯´æ˜**ï¼šã€Œç»“å°¾ã€å’Œã€Œè¿ç»­ã€æ˜¯å…³é”®å­—

**2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

æ ¹æ®çŠ¶æ€çš„å®šä¹‰ï¼Œç”±äº nums[i] ä¸€å®šä¼šè¢«é€‰å–ï¼Œå¹¶ä¸”ä»¥ nums[i] ç»“å°¾çš„è¿ç»­å­æ•°ç»„ä¸ä»¥ nums[i - 1] ç»“å°¾çš„è¿ç»­å­æ•°ç»„åªç›¸å·®ä¸€ä¸ªå…ƒç´  nums[i] ã€‚

å‡è®¾æ•°ç»„ `nums` çš„å€¼å…¨éƒ½ä¸¥æ ¼å¤§äº 0ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ `dp[i] = dp[i - 1] + nums[i]`ã€‚

å¯æ˜¯ `dp[i - 1]` æœ‰å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œäºæ˜¯åˆ†ç±»è®¨è®ºï¼š

- å¦‚æœ dp[i - 1] > 0ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ nums[i] ç›´æ¥æ¥åœ¨ dp[i - 1] è¡¨ç¤ºçš„é‚£ä¸ªæ•°ç»„çš„åé¢ï¼Œå¾—åˆ°å’Œæ›´å¤§çš„è¿ç»­å­æ•°ç»„ï¼›
- å¦‚æœ dp[i - 1] <= 0ï¼Œé‚£ä¹ˆ nums[i] åŠ ä¸Šå‰é¢çš„æ•° dp[i - 1] ä»¥åå€¼ä¸ä¼šå˜å¤§ã€‚äºæ˜¯ dp[i] ã€Œå¦èµ·ç‚‰ç¶ã€ï¼Œæ­¤æ—¶å•ç‹¬çš„ä¸€ä¸ª nums[i] çš„å€¼ï¼Œå°±æ˜¯ dp[i]ã€‚

$$
dp[i] = 
\begin{cases}
dp[i-1]+nums[i] & dp[i-1] > 0 \\ \\
nums[i] & dp[i-1] \leq 0
\end{cases}
$$

**3. åˆå§‹åŒ–**

`dp[0]` æ ¹æ®å®šä¹‰ï¼Œåªæœ‰ 1 ä¸ªæ•°ï¼Œä¸€å®šä»¥ `nums[0]` ç»“å°¾ï¼Œå› æ­¤ `dp[0] = nums[0]`

**4. è¾“å‡º**

è¿™é‡ŒçŠ¶æ€çš„å®šä¹‰ä¸æ˜¯é¢˜ç›®ä¸­çš„é—®é¢˜çš„å®šä¹‰ï¼Œ**ä¸èƒ½ç›´æ¥å°†æœ€åä¸€ä¸ªçŠ¶æ€è¿”å›å›å»**ï¼›

è¿™ä¸ªé—®é¢˜çš„è¾“å‡ºæ˜¯æŠŠæ‰€æœ‰çš„ `dp[0]`ã€`dp[1]`ã€â€¦â€¦ã€`dp[n - 1]` éƒ½çœ‹ä¸€éï¼Œå–æœ€å¤§å€¼

**5. ä¼˜åŒ–ç©ºé—´**

æ ¹æ®ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€ï¼Œ`dp[i]` çš„å€¼åªå’Œ `dp[i - 1]` æœ‰å…³ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ã€Œæ»šåŠ¨å˜é‡ã€çš„æ–¹å¼å°†ä»£ç è¿›è¡Œä¼˜åŒ–ã€‚

**å¤æ‚åº¦åˆ†æ**

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` æˆ– `O(1)`

```c++
class Solution {
public:
    int maxSubArray(vector<int>& nums) {
        int n = nums.size();
        vector<int> dp(n, 0);
        dp[0] = nums[0];
        for (int i = 1; i < n; i++) {
            if (dp[i - 1] > 0) {
                dp[i] = dp[i - 1] + nums[i];
            } else if (dp[i - 1] <= 0) {
                dp[i] = nums[i];
            }
        }
        return *max_element(dp.begin(), dp.end());
    }
};
```

```c++
class Solution {
public:
    int maxSubArray(vector<int>& nums) {
        int n = nums.size();
        int pre = nums[0];
        int ans = nums[0];
        for (int i = 1; i < n; i++) {
            if (pre > 0) {
                pre = pre + nums[i];
            } else if (pre <= 0) {
                pre = nums[i];
            }
            ans = max(ans, pre);
        }
        return ans;
    }
};
```

### 2ã€åˆ†æ²»

åˆ†æ²»æ³•çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œå…¶å®ä¹Ÿæ˜¯åˆ†ç±»è®¨è®ºã€‚

è¿ç»­å­åºåˆ—çš„æœ€å¤§å’Œä¸»è¦ç”±è¿™ä¸‰éƒ¨åˆ†å­åŒºé—´é‡Œå…ƒç´ çš„æœ€å¤§å’Œå¾—åˆ°ï¼š

- ç¬¬ 1 éƒ¨åˆ†ï¼šå­åŒºé—´ [left, mid]ï¼›
- ç¬¬ 2 éƒ¨åˆ†ï¼šå­åŒºé—´ [mid + 1, right]ï¼›
-  ç¬¬ 3 éƒ¨åˆ†ï¼šåŒ…å«å­åŒºé—´ [mid , mid + 1] çš„å­åŒºé—´ï¼Œå³ nums[mid] ä¸ nums[mid + 1] ä¸€å®šä¼šè¢«é€‰å–ã€‚

<img src="./doc/53.png" alt="53" style="zoom:50%;" />

è€ƒè™‘ç¬¬ 3 éƒ¨åˆ†è·¨è¶Šä¸¤ä¸ªåŒºé—´çš„è¿ç»­å­æ•°ç»„çš„æ—¶å€™ï¼Œç”±äº nums[mid] ä¸ nums[mid + 1] ä¸€å®šä¼šè¢«é€‰å–ï¼Œå¯ä»¥ä»ä¸­é—´å‘ä¸¤è¾¹æ‰©æ•£ï¼Œæ‰©æ•£åˆ°åº• é€‰å‡ºæœ€å¤§å€¼

**å¤æ‚åº¦åˆ†æ**

æ—¶é—´å¤æ‚åº¦ï¼š`O(nlogn)`ï¼Œè¿™é‡Œé€’å½’çš„æ·±åº¦æ˜¯å¯¹æ•°çº§åˆ«çš„ï¼Œæ¯ä¸€å±‚éœ€è¦éå†ä¸€éæ•°ç»„ï¼ˆæˆ–è€…æ•°ç»„çš„ä¸€åŠã€å››åˆ†ä¹‹ä¸€ï¼‰

ç©ºé—´å¤æ‚åº¦ï¼š`O(logn)`

```c++
class Solution {
public:
    int getCross(int left, int right, int mid, vector<int>& nums) {
        // ä¸€å®šä¼šåŒ…å« nums[mid]ï¼Œå› ä¸ºmidæ˜¯å‘ä¸‹å–æ•´å¾—åˆ°çš„
        int leftMax = INT_MIN;
        int sum = 0;
        for (int l = mid; l >= left; l--) {
            sum += nums[l];
            if (sum > leftMax) leftMax = sum;
        }

        int rightMax = INT_MIN;
        sum = 0;
        for (int r = mid + 1; r <= right; r++) {
            sum += nums[r];
            if (sum > rightMax) rightMax = sum;
        }

        return leftMax + rightMax;
    }

    int dfs(int left, int right, vector<int>& nums) {
        if (left == right) return nums[left];
        int mid = left + (right - left) / 2;

        int leftSub = dfs(left, mid, nums);               // [left, mid]
        int rightSub = dfs(mid + 1, right, nums);         // [mid+1, right]
        int crossSub = getCross(left, right, mid, nums);  // [left, right] ä¸¤ç«¯ä¸ç¡®å®š

        return max(leftSub, max(rightSub, crossSub));
    }

    int maxSubArray(vector<int>& nums) {
        return dfs(0, nums.size() - 1, nums);
    }
};
```




| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [446. ç­‰å·®æ•°åˆ—åˆ’åˆ† II - å­åºåˆ—](https://leetcode-cn.com/problems/arithmetic-slices-ii-subsequence/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/arithmetic-slices-ii-subsequence/solution/gong-shui-san-xie-xiang-jie-ru-he-fen-xi-ykvk/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [472. è¿æ¥è¯](https://leetcode-cn.com/problems/concatenated-words/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/concatenated-words/solution/gong-shui-san-xie-xu-lie-dpzi-fu-chuan-h-p7no/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [629. Kä¸ªé€†åºå¯¹æ•°ç»„](https://leetcode-cn.com/problems/k-inverse-pairs-array/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/k-inverse-pairs-array/solution/gong-shui-san-xie-yi-dao-xu-lie-dp-zhuan-tm01/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [689. ä¸‰ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ](https://leetcode-cn.com/problems/maximum-sum-of-3-non-overlapping-subarrays/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-sum-of-3-non-overlapping-subarrays/solution/gong-shui-san-xie-jie-he-qian-zhui-he-de-ancx/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1473. ç²‰åˆ·æˆ¿å­ III](https://leetcode-cn.com/problems/paint-house-iii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/paint-house-iii/solution/gong-shui-san-xie-san-wei-dong-tai-gui-h-ud7m/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |

