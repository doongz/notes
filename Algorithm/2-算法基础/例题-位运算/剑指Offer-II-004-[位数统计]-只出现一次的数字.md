é¢˜ç›®ï¼š[å‰‘æŒ‡ Offer II 004. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— ](https://leetcode.cn/problems/WGki4K/)

é¢˜è§£ï¼š[ã€å®«æ°´ä¸‰å¶ã€‘ä¸€é¢˜ä¸‰è§£ï¼šã€Œå“ˆå¸Œè¡¨ã€&ã€Œä½æ•°ç»Ÿè®¡ã€&ã€ŒDFAã€ - åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/WGki4K/solution/by-ac_oier-npwu/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° **ä¸€æ¬¡** å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° **ä¸‰æ¬¡ ã€‚**è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,2,3,2]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1,0,1,0,1,100]
è¾“å‡ºï¼š100
```

æç¤ºï¼š

1 <= nums.length <= 3 * 104
-231 <= nums[i] <= 231 - 1
nums ä¸­ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° ä¸€æ¬¡ å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° ä¸‰æ¬¡

è¿›é˜¶ï¼šä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ

 

æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 137 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/single-number-ii/

## æ–¹æ³•ä¸€ï¼šä½æ•°ç»Ÿè®¡

å“ˆå¸Œè¡¨è§£æ³•çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(n) çš„ï¼Œè€Œé¢˜ç›®çš„ã€è¿›é˜¶ã€‘éƒ¨åˆ†æåˆ°åº”å½“ä½¿ç”¨å¸¸æ•°ç©ºé—´æ¥åšã€‚

å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„åšæ³•ï¼Œæ˜¯åˆ©ç”¨ int ç±»å‹å›ºå®šä¸º 32 ä½ã€‚

ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º 32 çš„æ•°ç»„ cnt[] è®°å½•ä¸‹æ‰€æœ‰æ•°å€¼çš„æ¯ä¸€ä½å…±å‡ºç°äº†å¤šå°‘æ¬¡ 1ï¼Œå†å¯¹ cnt[] æ•°ç»„çš„æ¯ä¸€ä½è¿›è¡Œ mod 3 æ“ä½œï¼Œé‡æ–°æ‹¼å‡‘å‡ºåªå‡ºç°ä¸€æ¬¡çš„æ•°å€¼ã€‚

ä¸¾ä¸ª ğŸŒ°ï¼Œè€ƒè™‘æ ·ä¾‹ [1,1,1,3]ï¼Œ1 å’Œ 3 å¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºåˆ†åˆ«æ˜¯ 00..001 å’Œ 00..011ï¼Œå­˜å…¥ cnt[] æ•°ç»„åå¾—åˆ° [0,0,...,0,1,4]ã€‚è¿›è¡Œ mod 3 æ“ä½œåå¾—åˆ° [0,0,...,0,1,1]ï¼Œå†è½¬ä¸ºåè¿›åˆ¶æ•°å­—å³å¯å¾—ã€Œåªå‡ºç°ä¸€æ¬¡ã€çš„ç­”æ¡ˆ 3ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)

```c++
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        int cnt[32];
        memset(cnt, 0, sizeof(cnt));
        // ç»Ÿè®¡æ¯ä¸ªä½ä¸Š 1 çš„ä¸ªæ•°
        for (int x : nums) {
            for (int i = 0; i < 32; i++) {
                if (((x >> i) & 1) == 1) {
                    cnt[i]++;
                }
            }
        }
        // ä»äºŒè¿›åˆ¶è¡¨ç¤ºæ¢å¤æˆåè¿›åˆ¶
        int ans = 0;
        for (int i = 0; i < 32; i++) {
            if ((cnt[i] % 3 & 1) == 1) {
                ans += (1 << i);
            }
        }
        return ans;
    }
};
```

## æ–¹æ³•äºŒï¼šDFA

å¦‚æœæˆ‘ä»¬è€ƒè™‘ã€Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€çš„æƒ…å†µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ã€Œå¼‚æˆ–ã€è¿ç®—ã€‚

åˆ©ç”¨ç›¸åŒæ•°å¼‚æˆ–ä¸º 0 çš„æ€§è´¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¥½å®ç°çŠ¶æ€åˆ‡æ¢ï¼š

![image.png](https://pic.leetcode-cn.com/1619711233-IMBWOM-image.png)

æœ¬é¢˜æ˜¯è€ƒè™‘ã€Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸‰æ¬¡ã€çš„æƒ…å†µï¼Œé‚£ä¹ˆå¯¹åº”äº†ã€Œå‡ºç° 0 æ¬¡ã€ã€ã€Œå‡ºç° 1 æ¬¡ã€å’Œã€Œå‡ºç° 2 æ¬¡ã€ä¸‰ç§çŠ¶æ€ï¼Œæ„å‘³ç€è‡³å°‘éœ€è¦ä¸¤ä½è¿›è¡Œè®°å½•ï¼Œä¸”çŠ¶æ€è½¬æ¢å…³ç³»ä¸ºï¼š

![image.png](https://pic.leetcode-cn.com/1619711751-eNDISi-image.png)

é‚£ä¹ˆå¦‚ä½•å°†ä¸Šè¿° DFA ç”¨è¡¨è¾¾å¼è¡¨ç¤ºå‡ºæ¥å‘¢ï¼Ÿæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

- ç”¨ã€ŒçœŸå€¼è¡¨ã€å†™å‡ºã€Œé€»è¾‘å‡½æ•°è¡¨è¾¾å¼ã€å¯å‚è€ƒ [è¿™é‡Œ](https://leetcode.cn/link/?target=https://wenku.baidu.com/view/e9460ad96729647d27284b73f242336c1eb930f0.html)ï¼ŒåŒ–ç®€è¿‡ç¨‹å¯ä»¥å‚è€ƒ [å¡è¯ºå›¾åŒ–ç®€æ³•](https://leetcode.cn/link/?target=https://baike.baidu.com/item/å¡è¯ºå›¾åŒ–ç®€æ³•) ã€‚
- æŠŠç»“è®ºè®°ä½ï¼ˆè¿™æ˜¯ä¸€é“ç»å…¸çš„ DFA å…¥é—¨é¢˜ï¼‰ã€‚
- ç¡¬åšï¼Œä½è¿ç®—ä¹Ÿå°±é‚£å‡ ç§ï¼Œä¸ä¼šã€Œæ•°å­—ç”µè·¯ã€ä¹Ÿè®°ä¸ä½ã€Œç»“è®ºã€ï¼Œç ¸æ—¶é—´çœ‹ç€çœŸå€¼è¡¨ä¸æ–­è°ƒé€»è¾‘ä¹Ÿæ˜¯å¯ä»¥å†™å‡ºæ¥çš„ã€‚


æ—¶é—´å¤æ‚åº¦ï¼šO(n)

ç©ºé—´å¤æ‚åº¦ï¼šO(1)

```c++
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        int one = 0, two = 0;
        for (int x : nums) {
            one = one ^ x & ~two;
            two = two ^ x & ~one;
        }
        return one;
    }
};
```