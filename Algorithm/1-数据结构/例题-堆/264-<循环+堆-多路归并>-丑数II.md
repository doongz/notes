[264. ä¸‘æ•° II](https://leetcode-cn.com/problems/ugly-number-ii/)

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ç¬¬ `n` ä¸ª **ä¸‘æ•°** ã€‚

**ä¸‘æ•°** å°±æ˜¯åªåŒ…å«è´¨å› æ•° `2`ã€`3` å’Œ/æˆ– `5` çš„æ­£æ•´æ•°ã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šn = 10
è¾“å‡ºï¼š12
è§£é‡Šï¼š[1, 2, 3, 4, 5, 6, 8, 9, 10, 12] æ˜¯ç”±å‰ 10 ä¸ªä¸‘æ•°ç»„æˆçš„åºåˆ—ã€‚
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š1
è§£é‡Šï¼š1 é€šå¸¸è¢«è§†ä¸ºä¸‘æ•°ã€‚
```

**æç¤ºï¼š**

- `1 <= n <= 1690`

## æ–¹æ³•ä¸€ï¼šå¾ªç¯+å † å…ˆå­˜å†æ’

æ ¹æ®ä¸‘æ•°çš„å®šä¹‰ï¼Œæœ‰å¦‚ä¸‹ç»“è®ºï¼š

- 1 æ˜¯æœ€å°çš„ä¸‘æ•°
- å¯¹äºä»»æ„ä¸€ä¸ªä¸‘æ•° xï¼Œå…¶ä¸ä»»æ„çš„è´¨å› æ•°2ã€3ã€5ç›¸ä¹˜ï¼Œç»“æœ2xã€3xã€5xä»ä¸ºä¸‘æ•°

é€šè¿‡æ¯æ¬¡å¾ªç¯

1. å½“å‰æœ€å°å€¼ä¸2ã€3ã€5ç›¸ä¹˜ï¼Œç›¸ä¹˜çš„ç»“æœè‚¯å®šä¼šä¹‹åçš„ä¸€æ¬¡éå†ä¸­ä½œä¸ºæœ€å°å€¼ï¼Œéƒ½å…¥å †
2. è·å–ã€Œå°æ ¹å †ã€çš„å †é¡¶ï¼Œè®°å½•ä¸ºä¸‹ä¸€æ¬¡çš„æœ€å°å€¼ï¼Œç„¶åç§»é™¤
3. ç±»ä¼¼ 12 è¿™ä¸ªå…ƒç´ ï¼Œå¯ç”± 4 ä¹˜ 3 å¾—åˆ°ï¼Œä¹Ÿå¯ç”± 6 ä¹˜ 2 å¾—åˆ°ï¼Œæ‰€ä»¥è¦å»é‡

**åœ¨ç¬¬ n æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œè·å–åˆ°çš„ã€Œå°æ ¹å †ã€å †é¡¶ï¼Œå°±æ˜¯ç¬¬ n å°çš„ä¸‘æ ‘**

æ—¶é—´å¤æ‚åº¦ï¼š`O(nlogn)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`

**åº•å±‚å®¹å™¨ä¸º vector ä¼šå¿«å¾ˆå¤šï¼Œæœ‰æ²¡æœ‰å¤§ä½¬çŸ¥é“ä¸ºå•¥ï¼Ÿ**

æ‰§è¡Œç”¨æ—¶ï¼š48 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†34.47%çš„ç”¨æˆ·

å†…å­˜æ¶ˆè€—ï¼š10.4 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†31.37%çš„ç”¨æˆ·

è‹¥ä¸º `priority_queue<long, deque<long>, greater<long>> smallQ;`

æ‰§è¡Œç”¨æ—¶ï¼š468 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†5.64%çš„ç”¨æˆ·

å†…å­˜æ¶ˆè€—ï¼š14.5 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†28.09%çš„ç”¨æˆ·

```cpp
class Solution {
public:
    int nthUglyNumber(int n) {
        long ans = 1;
        priority_queue<long, vector<long>, greater<long>> smallQ;
        for (int i = 1; i < n; i++) {
            smallQ.push(ans * 2);
            smallQ.push(ans * 3);
            smallQ.push(ans * 5);

            ans = smallQ.top();
            smallQ.pop();

            while (!smallQ.empty() && smallQ.top() == ans) {
                smallQ.pop();
            }
        }
        return ans;
    }
};
```

## æ–¹æ³•äºŒï¼šå¤šè·¯å½’å¹¶ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰å…ˆæ’å†å­˜

https://leetcode-cn.com/problems/ugly-number-ii/solution/bao-li-you-xian-dui-lie-xiao-ding-dui-dong-tai-gui/

### å¤šè·¯å½’å¹¶

- å°†å¤šæ¡è·¯å½’å¹¶åˆ°ä¸€æ¡è·¯ä¸Šï¼Œä»å‰å¾€åè¿­ä»£è®¡ç®—ï¼Œç”±ã€Œå½’å¹¶è·¯ä¸‹æ ‡ã€æ§åˆ¶

- æ¯æ¡è·¯é€šè¿‡ã€Œå„è‡ªçš„æŒ‡é’ˆä¸‹æ ‡ã€æ§åˆ¶

ä»è§£æ³•ä¸€ä¸­ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬ã€Œå¾€åäº§ç”Ÿçš„ä¸‘æ•°ã€éƒ½æ˜¯åŸºäºã€Œå·²æœ‰ä¸‘æ•°ã€è€Œæ¥ï¼ˆä½¿ç”¨ã€Œå·²æœ‰ä¸‘æ•°ã€ä¹˜ä¸Šã€Œè´¨å› æ•°ã€2ã€3ã€5ï¼‰ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æ‰€æœ‰ä¸‘æ•°çš„æœ‰åºåºåˆ—ä¸º a1, a2, a3 ... an çš„è¯ï¼Œåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªæ•°éƒ½å¿…ç„¶èƒ½å¤Ÿè¢«ä»¥ä¸‹ä¸‰ä¸ªåºåˆ—ï¼ˆä¸­çš„è‡³å°‘ä¸€ä¸ªï¼‰è¦†ç›–ï¼š

- ç”± ä¸‘æ•° * 2 æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š`1*2ã€2*2ã€3*2ã€4*2ã€5*2ã€6*2ã€8*2 ...`
- ç”± ä¸‘æ•° * 3 æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š`1*3ã€2*3ã€3*3ã€4*3ã€5*3ã€6*3ã€8*3 ...`
- ç”± ä¸‘æ•° * 5 æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š`1*5ã€2*5ã€3*5ã€4*5ã€5*5ã€6*5ã€8*5 ...`

ä¸¾ä¸ªğŸŒ°ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ±‚å¾— ä¸‘æ•°åºåˆ— [1, 2, 3, ... , 10, 12] çš„æœ€åä¸€ä½ï¼Œé‚£ä¹ˆè¯¥åºåˆ—å¯ä»¥çœ‹ä½œä»¥ä¸‹ä¸‰ä¸ªæœ‰åºåºåˆ—å½’å¹¶è€Œæ¥ï¼š

- `1*2ã€2*2ã€3*2 ... 10*2ã€12*2` å°† 2 æå‡ºï¼Œå³ arr * 2
- `1*3ã€2*3ã€3*3 ... 10*3ã€12*3` å°† 3 æå‡ºï¼Œå³ arr * 3
- `1*5ã€2*5ã€3*5 ... 10*5ã€12*5` å°† 5 æå‡ºï¼Œå³ arr * 5

å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆæ¥æŒ‡å‘ç›®æ ‡åºåˆ— `arr` çš„æŸä¸ªä¸‹æ ‡ï¼ˆä¸‹æ ‡ 0 ä½œä¸ºå“¨å…µä¸ä½¿ç”¨ï¼Œèµ·å§‹éƒ½ä¸º 1ï¼‰ï¼Œä½¿ç”¨ `arr[ä¸‹æ ‡]*è´¨å› æ•°` ä»£è¡¨å½“å‰ä½¿ç”¨åˆ°ä¸‰ä¸ªæœ‰åºåºåˆ—ä¸­çš„å“ªä¸€ä½ï¼ŒåŒæ—¶ä½¿ç”¨ `idx` è¡¨ç¤ºå½“å‰ç”Ÿæˆåˆ° `arr` å“ªä¸€ä½ä¸‘æ•°ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`

```cpp
class Solution {
public:
    int nthUglyNumber(int n) {
        // ç¬¬nä¸ªä¸‘æ•°ä»1å¼€å§‹è®°
        vector<int> dp(n + 1);
        dp[1] = 1;

        int ptr2 = 1, ptr3 = 1, ptr5 = 1;
        for (int i = 2; i <= n; i++) {
            int val2 = dp[ptr2] * 2;
            int val3 = dp[ptr3] * 3;
            int val5 = dp[ptr5] * 5;

            // å°†ä¸‰ä¸ªæœ‰åºåºåˆ—ä¸­çš„æœ€å°ä¸€ä½å­˜å…¥ã€Œå·²æœ‰ä¸‘æ•°ã€åºåˆ—
            int minVal = min(val2, min(val3, val5));
            dp[i] = minVal;

            // ç”±äºå¯èƒ½ä¸åŒæœ‰åºåºåˆ—ä¹‹é—´äº§ç”Ÿç›¸åŒä¸‘æ•°ï¼Œå› æ­¤åªè¦ä¸€æ ·çš„ä¸‘æ•°å°±è·³è¿‡ï¼ˆä¸èƒ½ä½¿ç”¨ else if ï¼‰
            if (minVal == val2) ptr2++;
            if (minVal == val3) ptr3++;
            if (minVal == val5) ptr5++;
        }
        return dp[n];
    }
};
```



