# å­—å…¸æ ‘

å‚è€ƒ 1ï¼š[è¯¦è§£å‰ç¼€æ ‘ã€ŒTrieTree æ±‡æ€»çº§åˆ«æ•´ç† ğŸ”¥ğŸ”¥ğŸ”¥ã€ - å­—ç¬¦ä¸²çš„å‰ç¼€åˆ†æ•°å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/sum-of-prefix-scores-of-strings/solution/by-lfool-w82u/)

å‚è€ƒ 2ï¼š[https://leetcode-cn.com/problems/implement-trie-prefix-tree/solution/gong-shui-san-xie-yi-ti-shuang-jie-er-we-esm9/](https://leetcode-cn.com/problems/implement-trie-prefix-tree/solution/gong-shui-san-xie-yi-ti-shuang-jie-er-we-esm9/)

ç›®æ ‡ï¼šåƒä½¿ç”¨ stl ä¸€æ ·ç†Ÿæ‚‰

è€ƒç‚¹ï¼š

- å¦‚ä½•éå†å­—å…¸æ ‘ï¼Œå¯ä»¥ç”¨å¾ªç¯ï¼Œä¹Ÿå¯ä»¥ç”¨ dfs
- å­—å…¸æ ‘çš„èŠ‚ç‚¹åº”è¯¥å­˜ä»€ä¹ˆå€¼

## ä¸€ã€åŸºç¡€

Trie æ ‘ï¼ˆåˆå«å‰ç¼€æ ‘æˆ–å­—å…¸æ ‘ï¼‰æ˜¯ä¸€ç§ç”¨äº**å¿«é€ŸæŸ¥è¯¢ã€ŒæŸä¸ªå­—ç¬¦ä¸²/å­—ç¬¦å‰ç¼€ã€æ˜¯å¦å­˜åœ¨**çš„æ•°æ®ç»“æ„ã€‚

å…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ã€Œè¾¹ã€æ¥ä»£è¡¨æœ‰æ— å­—ç¬¦ï¼Œä½¿ç”¨ã€Œç‚¹ã€æ¥è®°å½•æ˜¯å¦ä¸ºã€Œå•è¯ç»“å°¾ã€ä»¥åŠã€Œå…¶åç»­å­—ç¬¦ä¸²çš„å­—ç¬¦æœ‰å“ªäº›ã€ã€‚

é¦–å…ˆï¼Œåœ¨çº¯ç®—æ³•é¢†åŸŸï¼Œå‰ç¼€æ ‘ç®—æ˜¯ä¸€ç§è¾ƒä¸ºå¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚

ä¸è¿‡å¦‚æœåœ¨å·¥ç¨‹ä¸­ï¼Œ**ä¸è€ƒè™‘å‰ç¼€åŒ¹é…çš„è¯ï¼ŒåŸºæœ¬ä¸Šä½¿ç”¨ hash å°±èƒ½æ»¡è¶³**

**å¦‚æœè€ƒè™‘å‰ç¼€åŒ¹é…çš„è¯ï¼Œå·¥ç¨‹ä¹Ÿä¸ä¼šä½¿ç”¨ Trie **

ä¸€æ–¹é¢æ˜¯å­—ç¬¦é›†å¤§å°ä¸å¥½ç¡®å®šï¼ˆé¢˜ç›®åªè€ƒè™‘ 26 ä¸ªå­—æ¯ï¼Œå­—ç¬¦é›†å¤§å°é™åˆ¶åœ¨è¾ƒå°çš„ 26 å†…ï¼‰å› æ­¤å¯ä»¥ä½¿ç”¨ Trieï¼Œä½†æ˜¯å·¥ç¨‹ä¸€èˆ¬å…¼å®¹å„ç§å­—ç¬¦é›†ï¼Œ**ä¸€æ—¦å­—ç¬¦é›†å¤§å°å¾ˆå¤§çš„è¯ï¼ŒTrie å°†ä¼šå¸¦æ¥å¾ˆå¤§çš„ç©ºé—´æµªè´¹**

å¦å¤–ï¼Œ**å¯¹äºä¸ªåˆ«çš„è¶…é•¿å­—ç¬¦ Trie ä¼šè¿›ä¸€æ­¥å˜æ·±**ã€‚

è¿™æ—¶å€™å¦‚æœ Trie æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­ï¼ŒTrie ç»“æ„è¿‡æ·±å¸¦æ¥çš„å½±å“æ˜¯å¤šæ¬¡éšæœº IOï¼Œéšæœº IO æ˜¯æˆæœ¬å¾ˆé«˜çš„æ“ä½œã€‚

åŒæ—¶ Trie çš„ç‰¹æ®Šç»“æ„ï¼Œä¹Ÿä¼šä¸ºåˆ†å¸ƒå¼å­˜å‚¨å°†ä¼šå¸¦æ¥å›°éš¾ã€‚

å› æ­¤åœ¨å·¥ç¨‹é¢†åŸŸä¸­ Trie çš„åº”ç”¨é¢ä¸å¹¿ã€‚è‡³äºä¸€äº›è¯¸å¦‚ã€Œè”æƒ³è¾“å…¥ã€ã€ã€Œæ¨¡ç³ŠåŒ¹é…ã€ã€ã€Œå…¨æ–‡æ£€ç´¢ã€çš„å…¸å‹åœºæ™¯åœ¨å·¥ç¨‹ä¸»è¦æ˜¯é€šè¿‡ ES (ElasticSearch) è§£å†³çš„ã€‚è€Œ ES çš„å®ç°åˆ™ä¸»è¦æ˜¯ä¾é ã€Œå€’æ’ç´¢å¼•ã€ã€‚

### 1ã€åˆ†æ

ä¸€èˆ¬è€Œè¨€ï¼Œå­—ç¬¦ä¸²çš„é›†åˆéƒ½æ˜¯ä»…ç”±å°å†™å­—æ¯æ„æˆï¼Œæ‰€ä»¥æœ¬æ–‡ç« éƒ½æ˜¯åŸºäºè¯¥æƒ…å†µå±•å¼€åˆ†æï¼

å­—ç¬¦ä¸²é›†åˆï¼š[them, zip, team, the, app, that]ã€‚è¿™ä¸ªæ ·ä¾‹çš„å‰ç¼€æ ‘é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ

![1.svg](https://pic.leetcode-cn.com/1657540498-HHnzlV-1.svg)

ç”±äºéƒ½æ˜¯å°å†™å­—æ¯ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œå‡æœ‰ 26 ä¸ªå­©å­èŠ‚ç‚¹ï¼Œä¸Šå›¾ä¸­æ²¡æœ‰ç”»å‡ºæ¥ï¼Œçœç•¥äº†è€Œå·²...ï¼Œä½†æ˜¯è¦è®°ä½ï¼š**æ¯ä¸ªèŠ‚ç‚¹å‡æœ‰ 26 ä¸ªå­©å­èŠ‚ç‚¹**

**è¿˜æœ‰ä¸€ä¸ªç‚¹è¦æ˜ç¡®ï¼šèŠ‚ç‚¹ä»…ä»…è¡¨ç¤ºä»æ ¹èŠ‚ç‚¹åˆ°æœ¬èŠ‚ç‚¹çš„è·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆè€Œå·²**

å¯¹äºä¸Šå›¾ä¸­æ©™è‰²çš„èŠ‚ç‚¹ï¼Œå‡ä¸ºæœ‰æ•ˆèŠ‚ç‚¹ï¼Œå³ï¼šä»æ ¹èŠ‚ç‚¹åˆ°æ©™è‰²èŠ‚ç‚¹çš„è·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²å‡åœ¨é›†åˆä¸­

å¦‚æœç°åœ¨è¦æ‰¾å‰ç¼€ `te` æ˜¯å¦å­˜åœ¨ï¼Œåˆ†ä¸¤æ­¥ï¼š

- é¦–å…ˆçœ‹çœ‹è¡¨ç¤º `te` å­—ç¬¦ä¸²çš„è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œè¿™ä¸ªä¾‹å­æ˜¯å­˜åœ¨çš„
- å…¶æ¬¡çœ‹çœ‹è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹æ˜¯å¦æœ‰æ•ˆï¼Œå¾ˆé—æ†¾ï¼Œæ­¤å¤„ä¸ºç™½è‰²ï¼Œæ— æ•ˆ
- æ‰€ä»¥å‰ç¼€ `te` ä¸å­˜åœ¨ï¼ï¼

### 2ã€æ•°æ®ç»“æ„

ç°åœ¨çœ‹çœ‹å¦‚ä½•è¡¨ç¤ºè¿™æ£µã€Œå‰ç¼€æ ‘ã€ï¼Œå³æ•°æ®ç»“æ„è¯¥å¦‚ä½•å®šä¹‰ã€‚å…¶å®å°±æ˜¯ä¸€æ£µå¤šå‰æ ‘ï¼Œæœ‰ 26 ä¸ªå­©å­èŠ‚ç‚¹çš„å¤šå‰æ ‘è€Œå·²ï¼ï¼

ç°åœ¨æ¥æ€è€ƒèŠ‚ç‚¹çš„å€¼åˆè¯¥å¦‚ä½•è¡¨ç¤ºå‘¢ï¼Ÿ

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒèŠ‚ç‚¹ä»…ä»…è¡¨ç¤ºè·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆè€Œå·²ï¼Œæ‰€ä»¥èŠ‚ç‚¹å¯ä»¥ç”¨ `boolean` ç±»å‹æ¥è¡¨ç¤º

è¿˜æœ‰ä¸€ç±»æƒ…å†µå°±æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œæ‰€ä»¥èŠ‚ç‚¹çš„å€¼å¯ä»¥ç”¨ä¸€ä¸ªæ•°å€¼æ¥è¡¨ç¤º

```java
// å‰ç¼€æ ‘çš„æ•°æ®ç»“æ„
class TrieNode {
    boolean val;
    TrieNode[] children = new TrieNode[26];
}
// å‰ç¼€æ ‘çš„æ ¹èŠ‚ç‚¹
private TrieNode root = new TrieNode();
```

### 3ã€å¸¸ç”¨æ“ä½œ

æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œå…¶å®ã€Œå‰ç¼€æ ‘ã€å¸¸ç”¨æ“ä½œå°±ä¸‰ç§

- æ ¹æ®æ‰€ç»™å­—ç¬¦ä¸²é›†åˆæ„å»ºå‰ç¼€æ ‘
- åˆ¤æ–­å‰ç¼€æ ‘ä¸­æ˜¯å¦å­˜åœ¨ç›®æ ‡å­—ç¬¦ä¸²
- åœ¨å‰ç¼€æ ‘ä¸­æ‰¾å‡ºç›®æ ‡å­—ç¬¦ä¸²çš„æœ€çŸ­å‰ç¼€

### 4ã€æ„å»ºå‰ç¼€æ ‘

æœ€åˆï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ `root`ï¼Œå­©å­èŠ‚ç‚¹ä¹Ÿéƒ½è¿˜æ²¡åˆå§‹åŒ–ï¼

```java
// å¾€å‰ç¼€æ ‘ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²
public void insert(String word) {
    TrieNode p = root;
    for (char c : word.toCharArray()) {
        // char -> int
        int i = c - 'a';
        // åˆå§‹åŒ–å­©å­èŠ‚ç‚¹
        if (p.children[i] == null) p.children[i] = new TrieNode();
        // èŠ‚ç‚¹ä¸‹ç§»
        p = p.children[i];
    }
    // æ­¤æ—¶ p æŒ‡å‘ç›®æ ‡å­—ç¬¦ä¸²çš„ç»ˆç‚¹
    p.val = true;
}
```

ä¸ºäº†æ‰©å±•æ€ç»´ï¼Œè¿™é‡Œå†ç»™å‡ºé€’å½’çš„å®ç°æ–¹æ³•ï¼š(å’Œæ ‘çš„éå†å¾ˆåƒ)

```java
public TrieNode insert(TrieNode node, String word, int index) {
    // åˆå§‹åŒ–
    if (node == null) node = new TrieNode();
    // åˆ°äº†ç»ˆç‚¹
    if (index == word.length()) {
        node.val = true;
        return node;
    }
    int i = word.charAt(index) - 'a';
    node.children[i] = insert(node.children[i], word, index + 1);
    return node;
}
// è°ƒç”¨æ–¹æ³•
root = insert(root, word, 0);
```

### 5ã€å¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²

å½“ã€Œå‰ç¼€æ ‘ã€æ„å»ºå¥½äº†åï¼Œå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²ä¹Ÿå°±å¤§åŒå°å¼‚äº†

- é¦–å…ˆçœ‹çœ‹è¡¨ç¤ºå­—ç¬¦ä¸²çš„è·¯å¾„æ˜¯å¦å­˜åœ¨
- å…¶æ¬¡çœ‹çœ‹è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹æ˜¯å¦æœ‰æ•ˆ

```java
public boolean query(String word) {
    TrieNode p = root;
    for (char c : word.toCharArray()) {
        int i = c - 'a';
        // è·¯å¾„ä¸å­˜åœ¨çš„æƒ…å†µï¼Œç›´æ¥è¿”å› false
        if (p.children[i] == null) return false;
        p = p.children[i];
    }
    // è·¯å¾„å­˜åœ¨ï¼Œç›´æ¥è¿”å›è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹çš„æœ‰æ•ˆæ€§
    return p.val;
}
```

åŒæ ·çš„ï¼Œä¸ºäº†æ‰©å±•æ€ç»´ï¼Œè¿™é‡Œå†ç»™å‡ºé€’å½’çš„å®ç°æ–¹æ³•ï¼š(å’Œæ ‘çš„éå†å¾ˆåƒ)

```java
public boolean query(TrieNode node, String word, int index) {
    // è·¯å¾„ä¸å­˜åœ¨çš„æƒ…å†µ
    if (node == null) return false;
    // è·¯å¾„å­˜åœ¨ï¼Œç›´æ¥è¿”å›è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹çš„æœ‰æ•ˆæ€§
    if (index == word.length()) return node.val;
    
    int i = word.charAt(index) - 'a';
    return query(node.children[i], word, index + 1);
}
// è°ƒç”¨æ–¹æ³•
query(root, word, 0);
```

### 6ã€å¯»æ‰¾æœ€çŸ­å‰ç¼€

å’Œã€Œå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²ã€å·®ä¸å¤šï¼Œä½†åˆæœ‰äº›è®¸ä¸åŒ

- ã€Œå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²ã€å¿…é¡»éå†åˆ°ç›®æ ‡å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œç„¶åå†åˆ¤æ–­è·¯å¾„æ˜¯å¦æœ‰æ•ˆ
- ã€Œå¯»æ‰¾æœ€çŸ­å‰ç¼€ã€åªè¦åœ¨éå†çš„è¿‡ç¨‹æœ‰ä¸­ï¼Œé¦–æ¬¡å‡ºç°äº†æœ‰æ•ˆè·¯å¾„ï¼Œå³ä¸ºæ‰¾åˆ°ï¼ï¼

```java
    string query(string& word) {
        Trie* root = this;     // ä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥
        for (char c : word) {  // ç±»ä¼¼é“¾è¡¨çš„éå†
            int cur = c - 'a';
            if (root->son[cur] == nullptr) return "";  // æ²¡æ‰¾åˆ°
            if (root->son[cur]->isWord == true) {
                return root->son[cur]->str;
            }
            root = root->son[cur];
        }
        return "";  // æ²¡æ‰¾åˆ°
    }
```

### 7ã€å«æœ‰é€šé…ç¬¦çš„å¯»æ‰¾

é¡¾åæ€ä¹‰ï¼Œ`.`å¯ä»¥è¡¨ç¤ºä»»ä½•å­—ç¬¦ã€‚æ¯”å¦‚ï¼š`a.c` æ˜¯å¯ä»¥å’Œ `[abc, aec]` åŒ¹é…çš„

```java
    bool search(string word) {
        return dfs(this, 0, word);
    }

    bool dfs(WordDictionary *node, int depth, string &word) {
        if (depth == word.length()) {
            return node->isWord;
        }
        char c = word[depth];
        if (c != '.') {
            int cur = c - 'a';
            if (node->son[cur] == nullptr) return false;
            return dfs(node->son[cur], depth + 1, word);
        } else {
            for (auto ptr : node->son) {
                if (ptr != nullptr && dfs(ptr, depth + 1, word)) {
                    return true;  // åªè¦æ‰¾åˆ°ä¸€ä¸ªå°±ç›´æ¥è¿”å›true
                }
            }
        }
        return false;  // å¯èƒ½çš„sonéƒ½æ²¡è¿”å›trueï¼Œè¿™é‡Œè¿”å›false
    }
```

### 8ã€Trie ä¼˜åŒ– DFS æœç´¢

`if (node->son[nidx] != nullptr)` å¯åšåˆ°æå‰å‰ªæï¼Œå¤§å¹…åº¦ä¼˜åŒ–

```c++
void dfs(int row, int col, Trie* node) {
    if (node->str != "") {
        ans_set.insert(node->str);
    }
    for (pair<int, int> dir : direction) {
        int nr = row + dir.first;
        int nc = col + dir.second;
        if (0 <= nr && nr < rows && 0 <= nc && nc < cols) {
            if (!visited[nr][nc]) {
                int nidx = board[nr][nc] - 'a';
                if (node->son[nidx] != nullptr) {
                    visited[nr][nc] = true;
                    dfs(nr, nc, node->son[nidx]);
                    visited[nr][nc] = false;
                }
            }
        }
    }
}
```


## äºŒã€æ¨¡æ¿

### 1ã€TrieNode å®ç°

éšç€æ•°æ®çš„ä¸æ–­æ’å…¥ï¼Œæ ¹æ®éœ€è¦ä¸æ–­åˆ›å»º TrieNode èŠ‚ç‚¹ã€‚

æ—¶é—´å¤æ‚åº¦ï¼šTrie æ ‘çš„æ¯æ¬¡è°ƒç”¨æ—¶é—´å¤æ‚åº¦å–å†³äºå…¥å‚å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å¤æ‚åº¦ä¸º O(Len)ã€‚

ç©ºé—´å¤æ‚åº¦ï¼šç»“ç‚¹æ•°é‡ä¸º nï¼Œå­—ç¬¦é›†å¤§å°ä¸º kã€‚å¤æ‚åº¦ä¸º O(nk)ã€‚

#### C++æ¨¡ç‰ˆ

insert æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–å‡½æ•°éœ€è¦å“ªä¸ªå¤åˆ¶å“ªä¸ª

```c++
class Trie {
public:
    Trie* son[26];  // å­˜æ”¾å½“å‰å­—ç¬¦ä¹‹åçš„å­—ç¬¦
    bool isWord;
    string str;
  
    Trie() {
        for (int i = 0; i < 26; i++) son[i] = nullptr;
        isWord = false;
        str = "";
    }
    ~Trie() {
        for (int i = 0; i < 26; i++) {
            if (son[i] != nullptr) delete son[i];
        }
    }

    void insert(string word) {
        Trie* root = this;     // ä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥
        for (char c : word) {  // ç±»ä¼¼é“¾è¡¨çš„éå†
            int cur = c - 'a';
            if (root->son[cur] == nullptr) root->son[cur] = new Trie();
            root = root->son[cur];
        }
        root->isWord = true;  // åœ¨å•è¯çš„ç»“å°¾èŠ‚ç‚¹æ ‡è®°ä¸€ä¸‹ æ˜¯å•è¯
        root->str = word;     // ç»“å°¾ç›´æ¥è®°å½•å•è¯
    }

    bool search(string word) {
        Trie* root = this;  // ä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥
        for (char c : word) {
            int cur = c - 'a';
            if (root->son[cur] == nullptr) return false;  // wordè¿˜æ²¡éå†å®Œï¼Œå°±æ‰¾ä¸åˆ°äº†
            root = root->son[cur];
        }
        return root->isWord;  // éå†åˆ°wordç»“å°¾çš„èŠ‚ç‚¹ï¼Œæ˜¯å¦æ˜¯ä¹‹å‰å­˜åœ¨çš„å•è¯
    }

    bool startsWith(string prefix) {
        Trie* root = this;
        for (char c : prefix) {
            int cur = c - 'a';
            if (root->son[cur] == nullptr) return false;  // prefixè¿˜æ²¡éå†å®Œï¼Œå°±æ‰¾ä¸åˆ°äº†
            root = root->son[cur];
        }
        return true;  // prefixæ­£å¸¸éå†å®Œï¼Œå°±è¿”å›true
    }
};
```

#### pythonæ¨¡ç‰ˆ

```python
class TrieNode(object):
    def __init__(self):
        self.children = {}
        self.is_word = False
 
class Trie(object):
    def __init__(self):
        self.root = TrieNode()

    def insert(self, word):
        """
        Inserts a word into the trie.
        :type word: str
        :rtype: None
        """
        node = self.root    # ä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥
        for c in word:
            if c not in node.children:
                node.children[c] = TrieNode()
            node = node.children[c]
        node.is_word = True # åœ¨å•è¯çš„ç»“å°¾èŠ‚ç‚¹æ ‡è®°ä¸€ä¸‹

    def search_prefix(self, word):
        node = self.root    # ä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥
        for c in word:
            if c not in node.children:
                return None # wordä¸­çš„å­—ç¬¦æ²¡æ‰¾å®Œå°±æ–­äº†
            node = node.children[c]
        # è¿”å›wordç»“å°¾çš„èŠ‚ç‚¹ï¼Œ
        # å¯èƒ½æ˜¯ä¹‹å‰æ’å…¥å•è¯çš„ç»“å°¾èŠ‚ç‚¹ï¼Œnode.is_word ä¸º True
        # ä¸æ˜¯ä¹‹å‰æ’å…¥å•è¯çš„ç»“å°¾èŠ‚ç‚¹ï¼Œnode.is_word ä¸º False
        return node         

    def search(self, word):
        """
        Returns if the word is in the trie.
        :type word: str
        :rtype: bool
        """
        node = self.search_prefix(word)
        return node != None and node.is_word

    def startsWith(self, prefix):
        """
        Returns if there is any word in the trie that starts with the given prefix.
        :type prefix: str
        :rtype: bool
        """
        return self.search_prefix(prefix) != None

```

### [2ã€äºŒç»´æ•°ç»„å®ç°](https://leetcode-cn.com/problems/implement-trie-prefix-tree/solution/gong-shui-san-xie-yi-ti-shuang-jie-er-we-esm9/)

ä¸€ä¸ªæœ´ç´ çš„æƒ³æ³•æ˜¯ç›´æ¥ä½¿ç”¨ã€ŒäºŒç»´æ•°ç»„ã€æ¥å®ç° Trie æ ‘ã€‚

- ä½¿ç”¨äºŒç»´æ•°ç»„ trie[] æ¥å­˜å‚¨æˆ‘ä»¬æ‰€æœ‰çš„å•è¯å­—ç¬¦ã€‚
- ä½¿ç”¨ index æ¥è‡ªå¢è®°å½•æˆ‘ä»¬åˆ°åº•ç”¨äº†å¤šå°‘ä¸ªæ ¼å­ï¼ˆç›¸å½“äºç»™è¢«ç”¨åˆ°æ ¼å­è¿›è¡Œç¼–å·ï¼‰ã€‚
- ä½¿ç”¨ count[] æ•°ç»„è®°å½•æŸä¸ªæ ¼å­è¢«ã€Œè¢«æ ‡è®°ä¸ºç»“å°¾çš„æ¬¡æ•°ã€ï¼ˆå½“ idx ç¼–å·çš„æ ¼å­è¢«æ ‡è®°äº† n æ¬¡ï¼Œåˆ™æœ‰ cnt[idx]=nï¼‰ã€‚

ä½¿ç”¨ã€ŒäºŒç»´æ•°ç»„ã€çš„å¥½å¤„æ˜¯å†™èµ·æ¥é£å¿«ï¼ŒåŒæ—¶æ²¡æœ‰é¢‘ç¹ new å¯¹è±¡çš„å¼€é”€ã€‚ä½†æ˜¯éœ€è¦æ ¹æ®æ•°æ®ç»“æ„èŒƒå›´ä¼°ç®—æˆ‘ä»¬çš„ã€ŒäºŒç»´æ•°ç»„ã€åº”è¯¥å¼€å¤šå°‘è¡Œã€‚

åå¤„æ˜¯ä½¿ç”¨çš„ç©ºé—´é€šå¸¸æ˜¯ã€ŒTrieNodeã€æ–¹å¼çš„æ•°å€ï¼Œè€Œä¸”ç”±äºé€šå¸¸å¯¹è¡Œçš„ä¼°ç®—ä¼šå¾ˆå¤§ï¼Œå¯¼è‡´ä½¿ç”¨çš„äºŒç»´æ•°ç»„å¼€å¾—å¾ˆå¤§ï¼Œå¦‚æœè¿™æ—¶å€™æ¯æ¬¡åˆ›å»º Trie å¯¹è±¡æ—¶éƒ½å»åˆ›å»ºæ•°ç»„çš„è¯ï¼Œä¼šæ¯”è¾ƒæ…¢ï¼Œè€Œä¸”å½“æ ·ä¾‹å¤šçš„æ—¶å€™ç”šè‡³ä¼šè§¦å‘ GCï¼ˆå› ä¸º OJ æ¯æµ‹è¯•ä¸€ä¸ªæ ·ä¾‹ä¼šåˆ›å»ºä¸€ä¸ª Trie å¯¹è±¡ï¼‰ã€‚

å› æ­¤è¿˜æœ‰ä¸€ä¸ªå°æŠ€å·§æ˜¯å°†ä½¿ç”¨åˆ°çš„æ•°ç»„è½¬ä¸ºé™æ€ï¼Œç„¶ååˆ©ç”¨ index è‡ªå¢çš„ç‰¹æ€§åœ¨åˆå§‹åŒ– Trie æ—¶æ‰§è¡Œæ¸…ç†å·¥ä½œ & é‡ç½®é€»è¾‘ã€‚

è¿™æ ·çš„åšæ³•èƒ½å¤Ÿä½¿è¯„æµ‹æ—¶é—´é™ä½ä¸€åŠï¼Œè¿æ°”å¥½çš„è¯å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸ã€ŒTrieNodeã€æ–¹å¼å·®ä¸å¤šçš„æ—¶é—´ã€‚

```java
class Trie {
    // ä»¥ä¸‹ static æˆå‘˜ç‹¬ä¸€ä»½ï¼Œè¢«åˆ›å»ºçš„å¤šä¸ª Trie å…±ç”¨
    static int N = 100009; // ç›´æ¥è®¾ç½®ä¸ºåä¸‡çº§
    static int[][] trie = new int[N][26];
    static int[] count = new int[N];
    static int index = 0;

    // åœ¨æ„é€ æ–¹æ³•ä¸­å®Œæˆé‡ç½® static æˆå‘˜æ•°ç»„çš„æ“ä½œ
    // è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºå‡å°‘ new æ“ä½œï¼ˆæ— è®ºæœ‰å¤šå°‘æµ‹è¯•æ•°æ®ï¼Œä¸Šè¿° static æˆå‘˜åªä¼šè¢« new ä¸€æ¬¡ï¼‰
    public Trie() {
        for (int row = index; row >= 0; row--) {
            Arrays.fill(trie[row], 0);
        }
        Arrays.fill(count, 0);
        index = 0;
    }
    
    public void insert(String s) {
        int p = 0;
        for (int i = 0; i < s.length(); i++) {
            int u = s.charAt(i) - 'a';
            if (trie[p][u] == 0) trie[p][u] = ++index;
            p = trie[p][u];
        }
        count[p]++;
    }
    
    public boolean search(String s) {
        int p = 0;
        for (int i = 0; i < s.length(); i++) {
            int u = s.charAt(i) - 'a';
            if (trie[p][u] == 0) return false;
            p = trie[p][u];
        }
        return count[p] != 0;
    }
    
    public boolean startsWith(String s) {
        int p = 0;
        for (int i = 0; i < s.length(); i++) {
            int u = s.charAt(i) - 'a';
            if (trie[p][u] == 0) return false;
            p = trie[p][u];
        }
        return true;
    }
}
```



### 3ã€[ç»“åˆè´ªå¿ƒçš„ Trie](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247489106&idx=1&sn=b7c1d4864f42e8a54f4b4754ff9ba8d7&chksm=fd9cbd4dcaeb345b5e39e799bdbeb2e89ed424c763e2af2a23fcb8eab228acc46d10f0395686&token=1901895674&lang=zh_CN#rd)

### 4ã€[å¯åˆ é™¤/å¯è®¡æ•°çš„ Trie](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247489259&idx=1&sn=042ee479cebfbcf1f3b517461b32ddac&chksm=fd9cbdf4caeb34e2254783b211bac795eb0c9bd9b4be844cf48450ca5afa7ca5694fd98f7d39&token=1848397639&lang=zh_CN#rd)

é¢˜ç›®ï¼š[720. è¯å…¸ä¸­æœ€é•¿çš„å•è¯](https://leetcode-cn.com/problems/longest-word-in-dictionary/)



[676. å®ç°ä¸€ä¸ªé­”æ³•å­—å…¸](https://leetcode.cn/problems/implement-magic-dictionary/)

[745. å‰ç¼€å’Œåç¼€æœç´¢](https://leetcode.cn/problems/prefix-and-suffix-search/)

